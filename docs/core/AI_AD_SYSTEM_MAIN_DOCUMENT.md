# AIå¹¿å‘Šä»£æŠ•ç³»ç»Ÿå¼€å‘æ–‡æ¡£ v2.2 - AIè¾…åŠ©åä½œç‰ˆ

> **æ–‡æ¡£ç‰ˆæœ¬**: v2.2 AIè¾…åŠ©åä½œç‰ˆ
> **æ›´æ–°æ—¥æœŸ**: 2025-11-11
> **ç»´æŠ¤å›¢é˜Ÿ**: ç³»ç»Ÿæ¶æ„å›¢é˜Ÿ
> **æ–‡æ¡£ç›®çš„**: æä¾›å®Œæ•´çš„æŠ€æœ¯æ¶æ„ã€AIè¾…åŠ©å¼€å‘æŒ‡å—å’Œäº‘åœ°åä½œéƒ¨ç½²è¿ç»´è§„èŒƒ

> æœ¬æ–‡æ¡£åœ¨ v2.1 åŸºç¡€ä¸Šå…¨é¢æ•´åˆäº†bolt.newå‰ç«¯AIå¼€å‘å’ŒClaude Codeåç«¯AIåä½œæ¨¡å¼ï¼Œæ–°å¢äº†äº‘åœ°åä½œå¼€å‘æµç¨‹ã€AIç¼–ç¨‹æœ€ä½³å®è·µå’Œæ··åˆéƒ¨ç½²ç­–ç•¥ï¼Œä¸ºä¼ä¸šçº§AIè¾…åŠ©å¼€å‘æä¾›äº†å®Œæ•´çš„æŠ€æœ¯æŒ‡å¯¼å’Œå®æ–½è§„èŒƒã€‚

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿç»“æ„æ¦‚è§ˆ](#ä¸€ç³»ç»Ÿç»“æ„æ¦‚è§ˆ)
2. [æ ¸å¿ƒçŠ¶æ€æœºå®šä¹‰](#äºŒæ ¸å¿ƒçŠ¶æ€æœºå®šä¹‰)
3. [æ•°æ®åº“è®¾è®¡](#ä¸‰æ•°æ®åº“è®¾è®¡)
4. [å®‰å…¨ç­–ç•¥ä¸æƒé™æ§åˆ¶](#å››å®‰å…¨ç­–ç•¥ä¸æƒé™æ§åˆ¶)
5. [APIæ¥å£è§„èŒƒ](#äº”apiæ¥å£è§„èŒƒ)
6. [é”™è¯¯ç å®šä¹‰](#å…­é”™è¯¯ç å®šä¹‰)
7. [ç¯å¢ƒé…ç½®](#ä¸ƒç¯å¢ƒé…ç½®)
8. [AIè¾…åŠ©å¼€å‘ç³»ç»Ÿ](#å…«aiè¾…åŠ©å¼€å‘ç³»ç»Ÿ)
9. [éƒ¨ç½²è¿ç»´æŒ‡å—](#ä¹éƒ¨ç½²è¿ç»´æŒ‡å—)
10. [å¼€å‘é˜¶æ®µåˆ’åˆ†](#åå¼€å‘é˜¶æ®µåˆ’åˆ†)
11. [éªŒæ”¶æ ‡å‡†](#åä¸€éªŒæ”¶æ ‡å‡†)
12. [AIè¾…åŠ©å¼€å‘æ¨¡å¼](#åäºŒaiè¾…åŠ©å¼€å‘æ¨¡å¼)
13. [AIè¾…åŠ©å¼€å‘æœ€ä½³å®è·µ](#åä¸‰aiè¾…åŠ©å¼€å‘æœ€ä½³å®è·µ)

---

## ä¸€ã€ç³»ç»Ÿç»“æ„æ¦‚è§ˆ

### æŠ€æœ¯æ ˆæ¨èï¼ˆAIè¾…åŠ©åä½œç»„åˆï¼‰

#### å‰ç«¯æŠ€æœ¯æ ˆï¼ˆbolt.new AIè¾…åŠ©å¼€å‘ï¼‰
- **æ¡†æ¶**ï¼šNext.js 14 + TypeScript + Tailwind CSS
- **UIç»„ä»¶åº“**ï¼šshadcn/ui + Radix UI
- **çŠ¶æ€ç®¡ç†**ï¼šZustand + SWRï¼ˆæ•°æ®è·å–ï¼‰
- **å¼€å‘ç¯å¢ƒ**ï¼šbolt.newï¼ˆåœ¨çº¿IDE + AIè¾…åŠ©ç¼–ç¨‹ï¼‰
- **éƒ¨ç½²æ–¹å¼**ï¼šbolt.newè‡ªåŠ¨éƒ¨ç½² + CDNæ‰˜ç®¡
- **ç‰¹è‰²åŠŸèƒ½**ï¼š
  - è‡ªç„¶è¯­è¨€ç”ŸæˆReactç»„ä»¶
  - å®æ—¶é¢„è§ˆå’Œçƒ­é‡è½½
  - AIè‡ªåŠ¨æ ·å¼ä¼˜åŒ–ï¼ˆTailwindï¼‰
  - æ™ºèƒ½ä¾èµ–ç®¡ç†å’ŒåŒ…å®‰è£…

#### åç«¯æŠ€æœ¯æ ˆï¼ˆClaude Code AIè¾…åŠ©å¼€å‘ï¼‰
- **æ¡†æ¶**ï¼šFastAPI + Pydantic v2 + SQLAlchemyï¼ˆåŒæ­¥ç‰ˆï¼‰
- **AIå¼€å‘å·¥å…·**ï¼šClaude Codeï¼ˆæœ¬åœ°AIè¾…åŠ©ç¼–ç¨‹ï¼‰
- **æ•°æ®åº“**ï¼šPostgreSQLï¼ˆSupabaseæ‰˜ç®¡ï¼‰
- **ç¼“å­˜/é˜Ÿåˆ—**ï¼šRedis + RQï¼ˆä»»åŠ¡è°ƒåº¦ã€é€šçŸ¥ã€AIæ£€æµ‹ï¼‰
- **è®¤è¯å®‰å…¨**ï¼šJWT + bcrypt + RLSç­–ç•¥
- **ç‰¹è‰²åŠŸèƒ½**ï¼š
  - AIè‡ªåŠ¨ç”ŸæˆCRUD API
  - æ™ºèƒ½æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ
  - è‡ªåŠ¨ä»£ç è´¨é‡æ£€æŸ¥
  - å®æ—¶ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–å»ºè®®

#### åä½œæ¡¥æ¢æŠ€æœ¯
- **APIéš§é“**ï¼šngrokï¼ˆæœ¬åœ°APIå¤–ç½‘è®¿é—®ï¼‰
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šGit + GitHub/GitLab
- **å®æ—¶åŒæ­¥**ï¼šGit hooks + è‡ªåŠ¨åŒ–éƒ¨ç½²
- **æ¥å£è§„èŒƒ**ï¼šOpenAPI 3.0 + Swaggeræ–‡æ¡£
- **è·¨åŸŸå¤„ç†**ï¼šCORSé…ç½® + APIä»£ç†

#### ç›‘æ§å’Œè¿ç»´
- **æ—¥å¿—ç›‘æ§**ï¼šLoki + Promtail + Grafana + Sentry
- **æ€§èƒ½ç›‘æ§**ï¼šAPMå·¥å…· + è‡ªå®šä¹‰æŒ‡æ ‡
- **å®‰å…¨ç›‘æ§**ï¼šæ¼æ´æ‰«æ + å¼‚å¸¸æ£€æµ‹
- **éƒ¨ç½²è¿ç»´**ï¼šDocker Compose + Nginx + æ··åˆéƒ¨ç½²

### ç³»ç»Ÿæ¶æ„å›¾ï¼ˆAIè¾…åŠ©åä½œæ¨¡å¼ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                äº‘ç«¯å‰ç«¯å±‚ (bolt.new)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  AIç»„ä»¶ç”Ÿæˆ  â”‚ â”‚   å®æ—¶é¢„è§ˆ   â”‚ â”‚   åœ¨çº¿éƒ¨ç½²   â”‚           â”‚
â”‚  â”‚ React/Next  â”‚ â”‚  çƒ­é‡è½½      â”‚ â”‚  CDNæ‰˜ç®¡     â”‚           â”‚
â”‚  â”‚ shadcn/ui   â”‚ â”‚ Tailwind     â”‚ â”‚ è‡ªå®šä¹‰åŸŸå   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  åä½œæ¡¥æ¢æŠ€æœ¯      â”‚
                    â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”   â”‚
                    â”‚ â”‚ngrokâ”‚ â”‚ Git â”‚   â”‚
                    â”‚ â”‚éš§é“ â”‚ â”‚åŒæ­¥ â”‚   â”‚
                    â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æœ¬åœ°åç«¯å±‚ (Claude Code)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  AI APIç”Ÿæˆ  â”‚ â”‚  æ™ºèƒ½æµ‹è¯•    â”‚ â”‚  ä»£ç å®¡æŸ¥    â”‚           â”‚
â”‚  â”‚  FastAPI     â”‚ â”‚  è‡ªåŠ¨åŒ–      â”‚ â”‚  è´¨é‡ä¿è¯    â”‚           â”‚
â”‚  â”‚ Pydantic v2  â”‚ â”‚ pytest      â”‚ â”‚  Security   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     äº‘æ•°æ®å±‚       â”‚
                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚ â”‚  PostgreSQL     â”‚ â”‚
                    â”‚ â”‚  (Supabase)     â”‚ â”‚
                    â”‚ â”‚  + RLSå®‰å…¨      â”‚ â”‚
                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AIè¾…åŠ©å¼€å‘æµç¨‹å›¾
```
å¼€å‘é˜¶æ®µ ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éœ€æ±‚åˆ†æ â†’ AIè®¾è®¡ â†’ ä»£ç ç”Ÿæˆ â†’ è´¨é‡æ£€æŸ¥ â†’ éƒ¨ç½²ä¸Šçº¿          â”‚
â”‚    â”‚         â”‚         â”‚         â”‚         â”‚               â”‚
â”‚    â–¼         â–¼         â–¼         â–¼         â–¼               â”‚
â”‚  ä¸šåŠ¡æè¿°  æ¶æ„è®¾è®¡  AIç”Ÿæˆ   è‡ªåŠ¨æµ‹è¯•  è‡ªåŠ¨éƒ¨ç½²           â”‚
â”‚  ç”¨æˆ·æ•…äº‹  æ¥å£è®¾è®¡  ä»£ç å®¡æŸ¥  æ€§èƒ½åˆ†æ  ç›‘æ§å‘Šè­¦           â”‚
â”‚  åŠŸèƒ½æ¸…å•  æ•°æ®æ¨¡å‹  é‡æ„ä¼˜åŒ–  å®‰å…¨æ‰«æ  æ–‡æ¡£åŒæ­¥           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æŠ€æœ¯æ ˆåä½œï¼š
bolt.newï¼ˆå‰ç«¯ï¼‰ â†â†’ Gitç‰ˆæœ¬æ§åˆ¶ â†â†’ Claude Codeï¼ˆåç«¯ï¼‰
      â†“                              â†“
  AIç»„ä»¶ç”Ÿæˆ                    AI APIç”Ÿæˆ
      â†“                              â†“
  CDNæ‰˜ç®¡éƒ¨ç½²                æœ¬åœ°å¼€å‘ç¯å¢ƒ
      â†“                              â†“
  ç”¨æˆ·ç•Œé¢äº¤äº’                ä¸šåŠ¡é€»è¾‘å¤„ç†
      â†“                              â†“
              Supabaseæ•°æ®åº“ï¼ˆç»Ÿä¸€æ•°æ®å±‚ï¼‰
```

---

## äºŒã€æ ¸å¿ƒçŠ¶æ€æœºå®šä¹‰

### 1. å……å€¼ç”³è¯·çŠ¶æ€æœº
| çŠ¶æ€ | æè¿° | å¯æ“ä½œè§’è‰² | ä¸‹ä¸€çŠ¶æ€ | è‡ªåŠ¨è§¦å‘æ¡ä»¶ |
|------|------|-------------|-----------|-------------|
| **draft** | æŠ•æ‰‹æäº¤ | æŠ•æ‰‹ | pending | æ‰‹åŠ¨æäº¤ |
| **pending** | å®¡æ ¸ä¸­ | æˆ·ç®¡ | approved / rejected | æ‰‹åŠ¨å®¡æ‰¹ |
| **approved** | è´¢åŠ¡æ‰¹å‡† | è´¢åŠ¡ | paid | æ‰‹åŠ¨æ‰¹å‡† |
| **paid** | å·²æ”¯ä»˜ | ç³»ç»Ÿ | posted | æ”¯ä»˜ç¡®è®¤ |
| **posted** | å·²å…¥è´¦ | ç³»ç»Ÿ | â€” | å…¥è´¦å®Œæˆ |
| **rejected** | è¢«é©³å› | æˆ·ç®¡/è´¢åŠ¡ | draft | é©³å›åå¯é‡æ–°æäº¤ |

### 2. æ—¥æŠ¥å®¡æ ¸çŠ¶æ€æœº
| çŠ¶æ€ | æè¿° | å¯æ“ä½œè§’è‰² | ä¸‹ä¸€çŠ¶æ€ | è‡ªåŠ¨è§¦å‘æ¡ä»¶ |
|------|------|-------------|-----------|-------------|
| **draft** | æŠ•æ‰‹å¡«å†™ | æŠ•æ‰‹ | pending | è‡ªåŠ¨ä¿å­˜ |
| **pending** | å®¡æ ¸ä¸­ | æ•°æ®å‘˜ | approved / rejected | æäº¤å®¡æ ¸ |
| **approved** | å·²é€šè¿‡ | ç³»ç»Ÿ | â€” | å®¡æ ¸é€šè¿‡ |
| **rejected** | å¼‚å¸¸é€€å› | æ•°æ®å‘˜ | draft | å®¡æ ¸é©³å› |

### 3. è´¦æˆ·ç”Ÿå‘½å‘¨æœŸçŠ¶æ€æœº
| çŠ¶æ€ | è¯´æ˜ | è‡ªåŠ¨è§¦å‘æ¡ä»¶ | å¯æ“ä½œè§’è‰² |
|------|------|-----------------|-------------|
| **new** | æ–°å»º | åˆ›å»ºæ—¶ | æˆ·ç®¡ |
| **testing** | æµ‹è¯•æœŸ | 7æ—¥å†…ç¨³å®šæ¶ˆè€— | ç³»ç»Ÿ |
| **active** | æ­£å¸¸æŠ•æ”¾ | æ—¥å‡>100USD | ç³»ç»Ÿ |
| **suspended** | æš‚åœ | 3å¤©æ— æ¶ˆè€— | ç³»ç»Ÿ/æˆ·ç®¡ |
| **dead** | å°ç¦ | FBè¿”å›å¼‚å¸¸ | ç³»ç»Ÿ |
| **archived** | å½’æ¡£ | ç®¡ç†å‘˜æ‰‹åŠ¨ | ç®¡ç†å‘˜ |

---

## ä¸‰ã€æ•°æ®åº“è®¾è®¡

### 1. æ ¸å¿ƒè¡¨ç»“æ„

#### ç”¨æˆ·è¡¨ (users)
```sql
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    name VARCHAR(100) NOT NULL,
    role VARCHAR(20) NOT NULL CHECK (role IN ('admin', 'data_clerk', 'finance', 'media_buyer')),
    is_active BOOLEAN DEFAULT true,
    last_login TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_role ON users(role);
```

#### é¡¹ç›®è¡¨ (projects)
```sql
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(200) NOT NULL,
    description TEXT,
    client_name VARCHAR(200) NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'active' CHECK (status IN ('active', 'paused', 'completed')),
    budget DECIMAL(12,2),
    start_date DATE,
    end_date DATE,
    manager_id UUID REFERENCES users(id) ON DELETE SET NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_projects_status ON projects(status);
CREATE INDEX idx_projects_manager ON projects(manager_id);
```

#### æ¸ é“è¡¨ (channels)
```sql
CREATE TABLE channels (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(200) NOT NULL,
    company_name VARCHAR(200) NOT NULL,
    contact_info JSONB,
    service_fee_rate DECIMAL(5,2) DEFAULT 0.05,
    account_setup_fee DECIMAL(10,2) DEFAULT 0,
    min_recharge_amount DECIMAL(10,2) DEFAULT 100,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### å¹¿å‘Šè´¦æˆ·è¡¨ (ad_accounts)
```sql
CREATE TABLE ad_accounts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(200) NOT NULL,
    account_id VARCHAR(100) NOT NULL, -- FBè´¦å·ID
    platform VARCHAR(20) NOT NULL DEFAULT 'facebook',
    status VARCHAR(20) NOT NULL DEFAULT 'new' CHECK (status IN ('new', 'testing', 'active', 'suspended', 'dead', 'archived')),
    daily_budget DECIMAL(10,2),
    project_id UUID NOT NULL REFERENCES projects(id) ON DELETE CASCADE,
    assigned_user_id UUID NOT NULL REFERENCES users(id) ON DELETE SET NULL,
    channel_id UUID REFERENCES channels(id) ON DELETE SET NULL,
    api_credentials JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_ad_accounts_project ON ad_accounts(project_id);
CREATE INDEX idx_ad_accounts_user ON ad_accounts(assigned_user_id);
CREATE INDEX idx_ad_accounts_status ON ad_accounts(status);
```

#### æ—¥æŠ¥è¡¨ (daily_reports)
```sql
CREATE TABLE daily_reports (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    ad_account_id UUID NOT NULL REFERENCES ad_accounts(id) ON DELETE CASCADE,
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE SET NULL,
    report_date DATE NOT NULL,
    spend DECIMAL(10,2) NOT NULL,
    impressions BIGINT,
    clicks BIGINT,
    conversions INTEGER,
    cpl DECIMAL(8,2), -- cost per lead
    status VARCHAR(20) NOT NULL DEFAULT 'pending' CHECK (status IN ('draft', 'pending', 'approved', 'rejected')),
    submitted_at TIMESTAMP,
    approved_by UUID REFERENCES users(id),
    approved_at TIMESTAMP,
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(ad_account_id, report_date)
);

CREATE INDEX idx_daily_reports_account_date ON daily_reports(ad_account_id, report_date);
CREATE INDEX idx_daily_reports_status ON daily_reports(status);
```

#### å……å€¼ç”³è¯·è¡¨ (recharge_requests)
```sql
CREATE TABLE recharge_requests (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID NOT NULL REFERENCES projects(id) ON DELETE CASCADE,
    ad_account_id UUID NOT NULL REFERENCES ad_accounts(id) ON DELETE CASCADE,
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE SET NULL,
    amount DECIMAL(10,2) NOT NULL,
    requested_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(20) NOT NULL DEFAULT 'draft' CHECK (status IN ('draft', 'pending', 'approved', 'rejected', 'paid', 'posted')),
    data_clerk_id UUID REFERENCES users(id),
    data_clerk_approved_at TIMESTAMP,
    finance_id UUID REFERENCES users(id),
    finance_approved_at TIMESTAMP,
    paid_at TIMESTAMP,
    posted_at TIMESTAMP,
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_recharge_requests_project ON recharge_requests(project_id);
CREATE INDEX idx_recharge_requests_status ON recharge_requests(status);
```

### 2. å¤–é”®çº¦æŸè§„åˆ™

æ‰€æœ‰èµ„é‡‘ç±»è¡¨å¿…é¡»åŒ…å«å®Œæ•´çš„å¤–é”®è¿½æº¯ï¼š
```sql
-- å¤–é”®çº¦æŸç¤ºä¾‹
ALTER TABLE daily_reports
ADD CONSTRAINT fk_daily_reports_account
FOREIGN KEY (ad_account_id) REFERENCES ad_accounts(id) ON DELETE CASCADE;

ALTER TABLE daily_reports
ADD CONSTRAINT fk_daily_reports_user
FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL;
```

---

## å››ã€å®‰å…¨ç­–ç•¥ä¸æƒé™æ§åˆ¶

### 1. RLS ç­–ç•¥ä¸ä¸­é—´ä»¶æ³¨å…¥

#### RLSä¸­é—´ä»¶
```python
# middleware/rls_context.py
from fastapi import Request
from starlette.middleware.base import BaseHTTPMiddleware
from sqlalchemy.orm import Session

class RLSContextMiddleware(BaseHTTPMiddleware):
    async def dispatch(self, request: Request, call_next):
        user = getattr(request.state, 'user', None)
        if user:
            # ä½¿ç”¨åŒæ­¥SQLAlchemyè¿æ¥
            db: Session = request.state.db
            try:
                db.execute(f"SELECT set_config('app.current_user_id', '{user.id}', true)")
                db.execute(f"SELECT set_config('app.current_role', '{user.role}', true)")
                db.commit()
            except Exception as e:
                db.rollback()
                raise e

        response = await call_next(request)
        return response
```

#### RLSç­–ç•¥ç¤ºä¾‹
```sql
-- å¯ç”¨RLS
ALTER TABLE projects ENABLE ROW LEVEL SECURITY;
ALTER TABLE ad_accounts ENABLE ROW LEVEL SECURITY;
ALTER TABLE daily_reports ENABLE ROW LEVEL SECURITY;
ALTER TABLE recharge_requests ENABLE ROW LEVEL SECURITY;

-- é¡¹ç›®è®¿é—®ç­–ç•¥
CREATE POLICY project_access_policy ON projects
    USING (
        current_setting('app.current_role') = 'admin'
        OR created_by = current_setting('app.current_user_id')::uuid
        OR EXISTS (
            SELECT 1 FROM ad_accounts
            WHERE ad_accounts.project_id = projects.id
            AND ad_accounts.assigned_user_id = current_setting('app.current_user_id')::uuid
        )
    );

-- å¹¿å‘Šè´¦æˆ·è®¿é—®ç­–ç•¥
CREATE POLICY ad_account_access_policy ON ad_accounts
    USING (
        current_setting('app.current_role') = 'admin'
        OR current_setting('app.current_role') = 'data_clerk'
        OR assigned_user_id = current_setting('app.current_user_id')::uuid
    );

-- æ—¥æŠ¥è®¿é—®ç­–ç•¥
CREATE POLICY daily_report_access_policy ON daily_reports
    USING (
        current_setting('app.current_role') = 'admin'
        OR current_setting('app.current_role') = 'data_clerk'
        OR user_id = current_setting('app.current_user_id')::uuid
        OR EXISTS (
            SELECT 1 FROM ad_accounts
            WHERE ad_accounts.id = daily_reports.ad_account_id
            AND ad_accounts.assigned_user_id = current_setting('app.current_user_id')::uuid
        )
    );

-- å……å€¼è¯·æ±‚è®¿é—®ç­–ç•¥
CREATE POLICY recharge_request_access_policy ON recharge_requests
    USING (
        current_setting('app.current_role') = 'admin'
        OR current_setting('app.current_role') IN ('data_clerk', 'finance')
        OR user_id = current_setting('app.current_user_id')::uuid
    );
```

### 2. æƒé™çŸ©é˜µ
| åŠŸèƒ½æ¨¡å— | æŠ•æ‰‹ | æˆ·ç®¡ | è´¢åŠ¡ | ç®¡ç†å‘˜ |
|----------|------|------|------|----------|
| é¡¹ç›®ç®¡ç† | æŸ¥çœ‹è‡ªå·±é¡¹ç›® | å…¨æƒé™ | æŸ¥çœ‹ | å…¨æƒé™ |
| è´¦æˆ·ç®¡ç† | æŸ¥çœ‹è‡ªå·±è´¦æˆ· | åˆ†é…/ç®¡ç† | æŸ¥çœ‹ | å…¨æƒé™ |
| æ—¥æŠ¥ç®¡ç† | æäº¤/æŸ¥çœ‹è‡ªå·±æ—¥æŠ¥ | å®¡æ ¸/æŸ¥çœ‹ | æŸ¥çœ‹ | å…¨æƒé™ |
| å……å€¼ç®¡ç† | ç”³è¯·/æŸ¥çœ‹ | åˆå®¡ | ç»ˆå®¡ | å…¨æƒé™ |
| å¯¹è´¦ç®¡ç† | - | æŸ¥çœ‹ | åˆ›å»º/ç®¡ç† | å…¨æƒé™ |

---

## äº”ã€APIæ¥å£è§„èŒƒ

### 1. bolt.newåä½œå¼€å‘æ¥å£è§„èŒƒ

#### APIç‰ˆæœ¬æ§åˆ¶
```typescript
// bolt.newå‰ç«¯APIå®¢æˆ·ç«¯é…ç½®
const API_CONFIG = {
  baseURL: process.env.NEXT_PUBLIC_API_BASE_URL,
  version: 'v1',
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
    'Accept': 'application/json',
  }
};

// APIå®¢æˆ·ç«¯å°è£…
import axios from 'axios';

class ApiClient {
  private baseURL: string;
  private version: string;

  constructor() {
    this.baseURL = `${API_CONFIG.baseURL}/api/${API_CONFIG.version}`;
    this.setupInterceptors();
  }

  private setupInterceptors() {
    // è¯·æ±‚æ‹¦æˆªå™¨
    axios.interceptors.request.use((config) => {
      const token = localStorage.getItem('access_token');
      if (token) {
        config.headers.Authorization = `Bearer ${token}`;
      }
      config.headers['X-Request-ID'] = this.generateRequestId();
      return config;
    });

    // å“åº”æ‹¦æˆªå™¨
    axios.interceptors.response.use(
      (response) => response,
      async (error) => {
        if (error.response?.status === 401) {
          await this.refreshToken();
        }
        return Promise.reject(this.handleError(error));
      }
    );
  }

  // ç»Ÿä¸€çš„APIè°ƒç”¨æ–¹æ³•
  async request<T>(config: AxiosRequestConfig): Promise<ApiResponse<T>> {
    try {
      const response = await axios({
        ...config,
        baseURL: this.baseURL,
      });
      return response.data;
    } catch (error) {
      throw this.handleError(error);
    }
  }
}

// ç±»å‹å®šä¹‰
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: {
    code: string;
    message: string;
    details?: Record<string, any>;
  };
  request_id: string;
  timestamp: string;
}
```

#### è·¨åŸŸé…ç½®ï¼ˆCORSï¼‰
```python
# åç«¯CORSä¸­é—´ä»¶é…ç½®
from fastapi.middleware.cors import CORSMiddleware
from fastapi import FastAPI

app = FastAPI()

# é…ç½®CORSï¼Œå…è®¸bolt.newåŸŸåè®¿é—®
app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "https://your-bolt-new-project.bolt.new",  # bolt.newåŸŸå
        "https://your-custom-domain.com",          # è‡ªå®šä¹‰åŸŸå
        "http://localhost:3000",                   # æœ¬åœ°å¼€å‘
    ],
    allow_credentials=True,
    allow_methods=["GET", "POST", "PUT", "DELETE", "OPTIONS"],
    allow_headers=["*"],
    expose_headers=["X-Request-ID", "X-Total-Count"],
)
```

#### å®æ—¶æ•°æ®åŒæ­¥
```typescript
// WebSocketè¿æ¥ç®¡ç†
class WebSocketManager {
  private ws: WebSocket | null = null;
  private reconnectAttempts = 0;
  private maxReconnectAttempts = 5;

  connect() {
    const wsUrl = `${process.env.NEXT_PUBLIC_WS_URL}/ws`;
    this.ws = new WebSocket(wsUrl);

    this.ws.onopen = () => {
      console.log('WebSocketè¿æ¥å·²å»ºç«‹');
      this.reconnectAttempts = 0;
    };

    this.ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      this.handleMessage(data);
    };

    this.ws.onclose = () => {
      console.log('WebSocketè¿æ¥å·²å…³é—­');
      this.attemptReconnect();
    };
  }

  private handleMessage(data: any) {
    switch (data.type) {
      case 'status_update':
        this.updateStatus(data.payload);
        break;
      case 'new_notification':
        this.showNotification(data.payload);
        break;
      case 'data_refresh':
        this.refreshData(data.payload);
        break;
    }
  }
}
```

### 2. ç»Ÿä¸€å“åº”ç»“æ„
```json
{
  "success": true,
  "data": {...},
  "message": "æ“ä½œæˆåŠŸ",
  "code": "SUCCESS",
  "request_id": "uuid-string",
  "timestamp": "2025-11-11T10:30:00Z"
}
```

### 2. é”™è¯¯å“åº”ç»“æ„
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "å‚æ•°éªŒè¯å¤±è´¥",
    "details": {
      "field": "email",
      "reason": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
    }
  },
  "request_id": "uuid-string",
  "timestamp": "2025-11-11T10:30:00Z"
}
```

### 3. æ¥å£ç¤ºä¾‹

#### æ–°å»ºå……å€¼ç”³è¯·
```python
from fastapi import APIRouter, Depends, HTTPException
from pydantic import BaseModel
from sqlalchemy.orm import Session
from datetime import datetime
import uuid

# Pydanticæ¨¡å‹
class TopupCreate(BaseModel):
    project_id: str
    ad_account_id: str
    amount: float
    notes: str = None

    class Config:
        from_attributes = True

# APIè·¯ç”±
@router.post('/api/topups/request')
async def create_topup(
    req: TopupCreate,
    current_user: User = Depends(get_current_user),
    db: Session = Depends(get_db)
):
    """åˆ›å»ºå……å€¼ç”³è¯·"""
    try:
        # éªŒè¯æƒé™
        account = db.query(AdAccount).filter(
            AdAccount.id == req.ad_account_id,
            AdAccount.project_id == req.project_id,
            AdAccount.assigned_user_id == current_user.id
        ).first()

        if not account:
            raise HTTPException(status_code=403, detail="æ— æƒé™æ“ä½œè¯¥è´¦æˆ·")

        # åˆ›å»ºå……å€¼ç”³è¯·
        topup = RechargeRequest(
            project_id=req.project_id,
            ad_account_id=req.ad_account_id,
            user_id=current_user.id,
            amount=req.amount,
            notes=req.notes,
            status='draft'
        )

        db.add(topup)
        db.commit()
        db.refresh(topup)

        # è®°å½•æ“ä½œæ—¥å¿—
        await log_action('topup', 'create', current_user.id, topup.id)

        return {
            "success": True,
            "data": topup,
            "message": "å……å€¼ç”³è¯·æäº¤æˆåŠŸ"
        }

    except HTTPException:
        raise
    except Exception as e:
        db.rollback()
        raise HTTPException(status_code=500, detail="å†…éƒ¨æœåŠ¡å™¨é”™è¯¯")
```

#### å¯¹è´¦æ¥å£
```python
@router.post('/api/reconciliation/run')
async def run_reconciliation(
    project_id: str,
    current_user: User = Depends(get_current_user),
    db: Session = Depends(get_db)
):
    """æ‰§è¡Œå¯¹è´¦"""
    try:
        # éªŒè¯æƒé™ï¼ˆè´¢åŠ¡æˆ–ç®¡ç†å‘˜ï¼‰
        if current_user.role not in ['finance', 'admin']:
            raise HTTPException(status_code=403, detail="æƒé™ä¸è¶³")

        # è·å–é¡¹ç›®æ•°æ®
        spend_records = db.query(DailyReport).filter(
            DailyReport.project_id == project_id,
            DailyReport.status == 'approved'
        ).all()

        # è·å–å……å€¼è®°å½•
        topup_records = db.query(RechargeRequest).filter(
            RechargeRequest.project_id == project_id,
            RechargeRequest.status == 'posted'
        ).all()

        # è®¡ç®—å·®å¼‚
        total_spend = sum(record.spend for record in spend_records)
        total_topup = sum(record.amount for record in topup_records)
        difference = total_topup - total_spend

        # åˆ›å»ºå¯¹è´¦è®°å½•
        reconciliation = Reconciliation(
            project_id=project_id,
            total_spend=total_spend,
            total_topup=total_topup,
            difference=difference,
            created_by=current_user.id
        )

        db.add(reconciliation)
        db.commit()
        db.refresh(reconciliation)

        return {
            "success": True,
            "data": {
                "reconciliation_id": reconciliation.id,
                "project_id": project_id,
                "total_spend": float(total_spend),
                "total_topup": float(total_topup),
                "difference": float(difference)
            },
            "message": "å¯¹è´¦å®Œæˆ"
        }

    except HTTPException:
        raise
    except Exception as e:
        db.rollback()
        raise HTTPException(status_code=500, detail="å¯¹è´¦å¤±è´¥")
```

---

## å…­ã€é”™è¯¯ç å®šä¹‰

### 1. ä¸šåŠ¡é”™è¯¯ç 
| é”™è¯¯ç  | å«ä¹‰ | HTTPçŠ¶æ€ç  | è¯´æ˜ |
|--------|------|-------------|------|
| SUCCESS | æˆåŠŸ | 200 | æ“ä½œæˆåŠŸ |
| VALIDATION_ERROR | å‚æ•°æ ¡éªŒé”™è¯¯ | 400 | PydanticéªŒè¯å¤±è´¥ |
| UNAUTHORIZED | æœªç™»å½•æˆ–æƒé™ä¸è¶³ | 401 | Tokenè¿‡æœŸ/è§’è‰²ä¸åŒ¹é… |
| FORBIDDEN | ç¦æ­¢æ“ä½œ | 403 | å½“å‰çŠ¶æ€ä¸å…è®¸æ­¤æ“ä½œ |
| NOT_FOUND | èµ„æºä¸å­˜åœ¨ | 404 | æ— åŒ¹é…è®°å½• |
| STATE_ERROR | çŠ¶æ€é”™è¯¯ | 422 | çŠ¶æ€æœºä¸å…è®¸æ­¤æ“ä½œ |
| RATE_LIMIT_EXCEEDED | è¯·æ±‚é¢‘ç‡è¶…é™ | 429 | APIè°ƒç”¨é¢‘ç‡é™åˆ¶ |
| INTERNAL_ERROR | ç³»ç»Ÿå†…éƒ¨é”™è¯¯ | 500 | å¼‚å¸¸æ•è·ç»Ÿä¸€è¿”å› |

### 2. ä¸šåŠ¡ç‰¹å®šé”™è¯¯ç 
| é”™è¯¯ç  | å«ä¹‰ | è§¦å‘åœºæ™¯ |
|--------|------|----------|
| PROJECT_NOT_FOUND | é¡¹ç›®ä¸å­˜åœ¨ | æŸ¥è¯¢çš„é¡¹ç›®IDä¸å­˜åœ¨ |
| ACCOUNT_NOT_ASSIGNED | è´¦æˆ·æœªåˆ†é… | ç”¨æˆ·æ— æƒé™æ“ä½œè¯¥è´¦æˆ· |
| INSUFFICIENT_BALANCE | ä½™é¢ä¸è¶³ | è´¦æˆ·ä½™é¢ä¸è¶³ |
| RECHARGE_AMOUNT_INVALID | å……å€¼é‡‘é¢æ— æ•ˆ | é‡‘é¢ä¸åœ¨å…è®¸èŒƒå›´å†… |
| REPORT_ALREADY_EXISTS | æ—¥æŠ¥å·²å­˜åœ¨ | å½“æ—¥æŠ¥è¡¨å·²æäº¤ |
| INVALID_STATE_TRANSITION | çŠ¶æ€è½¬æ¢æ— æ•ˆ | çŠ¶æ€æœºä¸å…è®¸è¯¥è½¬æ¢ |

### 3. é”™è¯¯å¤„ç†ç¤ºä¾‹
```python
from fastapi import HTTPException
from pydantic import ValidationError

class BusinessException(Exception):
    def __init__(self, code: str, message: str, status_code: int = 400):
        self.code = code
        self.message = message
        self.status_code = status_code

async def exception_handler(request, exc: BusinessException):
    return JSONResponse(
        status_code=exc.status_code,
        content={
            "success": False,
            "error": {
                "code": exc.code,
                "message": exc.message
            },
            "request_id": getattr(request.state, "request_id", ""),
            "timestamp": datetime.utcnow().isoformat()
        }
    )

# ä½¿ç”¨ç¤ºä¾‹
try:
    # ä¸šåŠ¡é€»è¾‘
    if not project:
        raise BusinessException("PROJECT_NOT_FOUND", "é¡¹ç›®ä¸å­˜åœ¨", 404)
except BusinessException as e:
    raise HTTPException(status_code=e.status_code, detail={
        "code": e.code,
        "message": e.message
    })
```

---

## ä¸ƒã€ç¯å¢ƒé…ç½®

### 1. bolt.newå‰ç«¯ç¯å¢ƒé…ç½®

#### é¡¹ç›®åˆå§‹åŒ–
```bash
# åœ¨bolt.newä¸­åˆ›å»ºæ–°é¡¹ç›®
1. è®¿é—® https://bolt.new
2. é€‰æ‹© "Create New Project"
3. é€‰æ‹© "Next.js" æ¨¡æ¿
4. é…ç½®é¡¹ç›®è®¾ç½®ï¼š
   - Project Name: ai-ad-spend-frontend
   - Framework: Next.js 14
   - Language: TypeScript
   - Styling: Tailwind CSS
   - Package Manager: npm
```

#### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆbolt.newï¼‰
```bash
# .env.local (bolt.newé¡¹ç›®æ ¹ç›®å½•)
# APIé…ç½® - è¿æ¥æœ¬åœ°åç«¯
NEXT_PUBLIC_API_BASE_URL=https://your-ngrok-url.ngrok.io
NEXT_PUBLIC_API_VERSION=v1
NEXT_PUBLIC_WS_URL=ws://your-ngrok-url.ngrok.io/ws

# Supabaseé…ç½®ï¼ˆå‰ç«¯ç›´è¿ï¼Œä»…è¯»å–ï¼‰
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# åº”ç”¨é…ç½®
NEXT_PUBLIC_APP_NAME=AIå¹¿å‘Šä»£æŠ•ç³»ç»Ÿ
NEXT_PUBLIC_APP_VERSION=2.2.0
NEXT_PUBLIC_ENVIRONMENT=development

# åŠŸèƒ½å¼€å…³
NEXT_PUBLIC_ENABLE_ANALYTICS=false
NEXT_PUBLIC_ENABLE_ERROR_REPORTING=true
NEXT_PUBLIC_ENABLE_PERFORMANCE_MONITORING=true

# ç¬¬ä¸‰æ–¹æœåŠ¡
NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn
NEXT_PUBLIC_GOOGLE_ANALYTICS_ID=your-ga-id

# å¼€å‘å·¥å…·
NEXT_PUBLIC_ENABLE_DEVTOOLS=true
NEXT_PUBLIC_LOG_LEVEL=debug
```

#### é¡¹ç›®ä¾èµ–å®‰è£…
```bash
# bolt.newç»ˆç«¯ä¸­æ‰§è¡Œ
npm install @shadcn/ui
npm install zustand swr axios
npm install @hookform/resolvers react-hook-form
npm install recharts lucide-react
npm install @radix-ui/react-dialog
npm install @radix-ui/react-dropdown-menu
npm install @radix-ui/react-select
npm install class-variance-authority clsx tailwind-merge
```

### 2. æœ¬åœ°åç«¯ç¯å¢ƒé…ç½®

#### ngrokéš§é“é…ç½®
```bash
# å®‰è£…ngrok
npm install -g ngrok

# å¯åŠ¨æœ¬åœ°åç«¯ï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰
cd backend
uvicorn main:app --reload --host 0.0.0.0 --port 8000

# åˆ›å»ºngrokéš§é“
ngrok http 8000

# è¾“å‡ºç¤ºä¾‹ï¼š
# Forwarding https://random-string.ngrok.io -> http://localhost:8000
# å¤åˆ¶ https://random-string.ngrok.io åˆ°å‰ç«¯ç¯å¢ƒå˜é‡ä¸­
```

#### åç«¯ç¯å¢ƒå˜é‡é…ç½®
```bash
# .env.example
# åº”ç”¨é…ç½®
API_ENV=production
APP_NAME=AIå¹¿å‘Šä»£æŠ•ç³»ç»Ÿ
APP_VERSION=2.1.0
DEBUG=false
PORT=8000

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:password@localhost:5432/ai_ad_spend
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30

# Supabaseé…ç½®
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_JWT_SECRET=your-jwt-secret

# Redisé…ç½®
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0

# JWTé…ç½®
JWT_SECRET=your-super-secret-key-32-characters-minimum-length
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORSé…ç½®
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
ALLOWED_HEADERS=*

# æ–‡ä»¶ä¸Šä¼ é…ç½®
MAX_FILE_SIZE=10485760  # 10MB
UPLOAD_PATH=./uploads
ALLOWED_EXTENSIONS=jpg,jpeg,png,pdf,xlsx,csv

# å¤–éƒ¨APIé…ç½®
FACEBOOK_API_VERSION=v18.0
FACEBOOK_APP_ID=your-app-id
FACEBOOK_APP_SECRET=your-app-secret
FACEBOOK_GRAPH_URL=https://graph.facebook.com

# ç›‘æ§é…ç½®
SENTRY_DSN=https://your-dsn.ingest.sentry.io/project-id
LOG_LEVEL=INFO
LOG_FORMAT=json

# é‚®ä»¶é…ç½®
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USER=your-email
SMTP_PASSWORD=your-email-password
SMTP_TLS=true

# ç¼“å­˜é…ç½®
CACHE_TTL=3600
SESSION_TTL=86400

# å®‰å…¨é…ç½®
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60
BCRYPT_ROUNDS=12
```

### 2. Dockeré…ç½®
```yaml
# docker-compose.yml
version: '3.8'

services:
  # åç«¯æœåŠ¡
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://postgres:password@db:5432/ai_ad_spend
      - REDIS_URL=redis://redis:6379
    depends_on:
      - db
      - redis
    volumes:
      - ./uploads:/app/uploads

  # æ•°æ®åº“
  db:
    image: postgres:15
    environment:
      - POSTGRES_DB=ai_ad_spend
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  # Nginxåå‘ä»£ç†
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - backend

volumes:
  postgres_data:
  redis_data:
```

---

## å…«ã€AIæ¨¡å—æ¥å£

### 1. AIæ¨¡å—ç»“æ„
```python
from abc import ABC, abstractmethod
from typing import List, Dict, Optional
from pydantic import BaseModel
from datetime import date, datetime

class DailyReportData(BaseModel):
    """æ—¥æŠ¥æ•°æ®æ¨¡å‹"""
    date: date
    account_id: str
    spend: float
    impressions: int
    clicks: int
    conversions: int
    cpl: Optional[float] = None

class AnomalyResult(BaseModel):
    """å¼‚å¸¸æ£€æµ‹ç»“æœ"""
    date: date
    account_id: str
    anomaly_type: str
    reason: str
    severity: str  # low, medium, high, critical
    confidence: float

class LifetimePrediction(BaseModel):
    """è´¦æˆ·å¯¿å‘½é¢„æµ‹ç»“æœ"""
    account_id: str
    predicted_lifetime_days: int
    risk_level: str
    confidence_score: float
    key_factors: List[str]

class AIMonitorInterface(ABC):
    """AIç›‘æ§æ¥å£å®šä¹‰"""

    @abstractmethod
    async def detect_spending_anomalies(self, daily_data: List[DailyReportData]) -> List[AnomalyResult]:
        """æ£€æµ‹æ”¯å‡ºå¼‚å¸¸"""
        pass

    @abstractmethod
    async def predict_account_lifetime(self, account_id: str) -> LifetimePrediction:
        """é¢„æµ‹è´¦æˆ·å¯¿å‘½"""
        pass

    @abstractmethod
    async def detect_performance_decline(self, daily_data: List[DailyReportData]) -> List[AnomalyResult]:
        """æ£€æµ‹æ€§èƒ½ä¸‹é™"""
        pass

class AIMonitor(AIMonitorInterface):
    """AIç›‘æ§å®ç°"""

    def __init__(self):
        self.model_path = "./models/"
        self.thresholds = {
            "spending_deviation": 1.5,  # æ”¯å‡ºåå·®é˜ˆå€¼
            "performance_decline": 0.3,  # æ€§èƒ½ä¸‹é™é˜ˆå€¼
        }

    async def detect_spending_anomalies(self, daily_data: List[DailyReportData]) -> List[AnomalyResult]:
        """
        æ£€æµ‹æ”¯å‡ºå¼‚å¸¸
        åŸºäºå†å²æ•°æ®é¢„æµ‹å½“æ—¥æ”¯å‡ºèŒƒå›´ï¼Œè¶…å‡º150%è®¤ä¸ºæ˜¯å¼‚å¸¸
        """
        anomalies = []

        for data in daily_data:
            # è®¡ç®—å†å²æ”¯å‡ºå‡å€¼å’Œæ ‡å‡†å·®
            historical_spend = [d.spend for d in daily_data if d.date < data.date]
            if len(historical_spend) < 7:  # è‡³å°‘7å¤©å†å²æ•°æ®
                continue

            mean_spend = sum(historical_spend) / len(historical_spend)
            std_spend = (sum((x - mean_spend) ** 2 for x in historical_spend) / len(historical_spend)) ** 0.5

            # æ£€æµ‹å¼‚å¸¸
            if data.spend > mean_spend + self.thresholds["spending_deviation"] * std_spend:
                anomalies.append(AnomalyResult(
                    date=data.date,
                    account_id=data.account_id,
                    anomaly_type="spending_spike",
                    reason=f"æ”¯å‡ºå¼‚å¸¸åé«˜: ${data.spend:.2f} (å†å²å‡å€¼: ${mean_spend:.2f})",
                    severity="high",
                    confidence=0.85
                ))

        return anomalies

    async def predict_account_lifetime(self, account_id: str) -> LifetimePrediction:
        """
        é¢„æµ‹è´¦æˆ·å¯¿å‘½
        åŸºäºè´¦æˆ·è¡¨ç°æŒ‡æ ‡é¢„æµ‹å‰©ä½™å¤©æ•°
        """
        # è¿™é‡Œåº”è¯¥åŠ è½½è®­ç»ƒå¥½çš„æœºå™¨å­¦ä¹ æ¨¡å‹
        # ç›®å‰ä½¿ç”¨ç®€åŒ–è§„åˆ™ä½œä¸ºç¤ºä¾‹

        # è·å–è´¦æˆ·å†å²æ•°æ®
        # historical_data = await self._get_account_historical_data(account_id)

        # ç®€åŒ–é¢„æµ‹é€»è¾‘ï¼ˆå®é™…åº”è¯¥ä½¿ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹ï¼‰
        # predicted_lifetime = self._apply_ml_model(historical_data)

        # ç¤ºä¾‹é¢„æµ‹ç»“æœ
        return LifetimePrediction(
            account_id=account_id,
            predicted_lifetime_days=45,
            risk_level="medium",
            confidence_score=0.75,
            key_factors=["spending_stability", "conversion_rate", "account_age"]
        )

    async def detect_performance_decline(self, daily_data: List[DailyReportData]) -> List[AnomalyResult]:
        """
        æ£€æµ‹æ€§èƒ½ä¸‹é™
        æ£€æµ‹ç‚¹å‡»ç‡ã€è½¬åŒ–ç‡ç­‰å…³é”®æŒ‡æ ‡ä¸‹é™
        """
        anomalies = []

        for data in daily_data:
            # è®¡ç®—CTR (Click-Through Rate)
            if data.impressions > 0:
                current_ctr = data.clicks / data.impressions

                # è·å–å†å²CTR
                historical_data = [d for d in daily_data if d.date < data.date and d.impressions > 0]
                if len(historical_data) < 7:
                    continue

                historical_ctrs = [d.clicks / d.impressions for d in historical_data]
                avg_ctr = sum(historical_ctrs) / len(historical_ctrs)

                # æ£€æµ‹CTRä¸‹é™
                if current_ctr < avg_ctr * (1 - self.thresholds["performance_decline"]):
                    anomalies.append(AnomalyResult(
                        date=data.date,
                        account_id=data.account_id,
                        anomaly_type="performance_decline",
                        reason=f"ç‚¹å‡»ç‡ä¸‹é™: {current_ctr:.4f} (å†å²å‡å€¼: {avg_ctr:.4f})",
                        severity="medium",
                        confidence=0.70
                    ))

        return anomalies

# AIä»»åŠ¡è°ƒåº¦
from apscheduler.schedulers.asyncio import AsyncIOScheduler
from apscheduler.triggers.cron import CronTrigger

class AITaskScheduler:
    """AIä»»åŠ¡è°ƒåº¦å™¨"""

    def __init__(self, ai_monitor: AIMonitor):
        self.scheduler = AsyncIOScheduler()
        self.ai_monitor = ai_monitor

    async def start(self):
        """å¯åŠ¨è°ƒåº¦å™¨"""
        # æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œå¼‚å¸¸æ£€æµ‹
        self.scheduler.add_job(
            self.run_daily_anomaly_detection,
            CronTrigger(hour=2, minute=0),
            id="daily_anomaly_detection"
        )

        # æ¯å‘¨ä¸€æ‰§è¡Œè´¦æˆ·å¯¿å‘½é¢„æµ‹
        self.scheduler.add_job(
            self.run_weekly_lifetime_prediction,
            CronTrigger(day_of_week=1, hour=3, minute=0),
            id="weekly_lifetime_prediction"
        )

        self.scheduler.start()

    async def run_daily_anomaly_detection(self):
        """æ‰§è¡Œæ¯æ—¥å¼‚å¸¸æ£€æµ‹"""
        try:
            # è·å–å‰ä¸€å¤©çš„æ—¥æŠ¥æ•°æ®
            yesterday = date.today() - timedelta(days=1)
            daily_data = await self._get_daily_reports(yesterday)

            # æ‰§è¡Œå¼‚å¸¸æ£€æµ‹
            anomalies = await self.ai_monitor.detect_spending_anomalies(daily_data)

            if anomalies:
                # å‘é€å‘Šè­¦
                await self._send_anomaly_alerts(anomalies)

        except Exception as e:
            logger.error(f"AIå¼‚å¸¸æ£€æµ‹å¤±è´¥: {e}")

    async def run_weekly_lifetime_prediction(self):
        """æ‰§è¡Œæ¯å‘¨è´¦æˆ·å¯¿å‘½é¢„æµ‹"""
        try:
            # è·å–æ‰€æœ‰æ´»è·ƒè´¦æˆ·
            active_accounts = await self._get_active_accounts()

            predictions = []
            for account in active_accounts:
                prediction = await self.ai_monitor.predict_account_lifetime(account.id)
                predictions.append(prediction)

                # æ£€æŸ¥æ˜¯å¦éœ€è¦é¢„è­¦
                if prediction.risk_level in ['high', 'critical']:
                    await self._send_lifetime_alert(prediction)

        except Exception as e:
            logger.error(f"è´¦æˆ·å¯¿å‘½é¢„æµ‹å¤±è´¥: {e}")
```

### 2. AIè§¦å‘æ—¶æœº
| æ¨¡å— | è°ƒç”¨æ—¶æœº | æ•°æ®æº | é¢‘ç‡ |
|------|-----------|--------|------|
| æ”¯å‡ºå¼‚å¸¸æ£€æµ‹ | æ¯æ—¥å‡Œæ™¨2ç‚¹ | daily_reports | æ¯æ—¥ |
| æ€§èƒ½ä¸‹é™æ£€æµ‹ | æ¯æ—¥å‡Œæ™¨2ç‚¹ | daily_reports | æ¯æ—¥ |
| è´¦æˆ·å¯¿å‘½é¢„æµ‹ | æ¯å‘¨ä¸€å‡Œæ™¨3ç‚¹ | ad_accounts + daily_reports | æ¯å‘¨ |
| å®æ—¶å¼‚å¸¸å‘Šè­¦ | æ—¥æŠ¥æäº¤æ—¶ | single daily_report | å®æ—¶ |

---

## ä¹ã€éƒ¨ç½²è¿ç»´æŒ‡å—

### 1. bolt.new + Claude Codeæ··åˆéƒ¨ç½²æ¶æ„

#### éƒ¨ç½²æ¶æ„æ¦‚è§ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·è®¿é—®å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              è‡ªå®šä¹‰åŸŸå + SSL                          â”‚ â”‚
â”‚  â”‚         ai-ads.yourdomain.com                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                bolt.newäº‘ç«¯å‰ç«¯å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Next.js åº”ç”¨ (AIè¾…åŠ©å¼€å‘)                              â”‚ â”‚
â”‚  â”‚  â€¢ è‡ªåŠ¨éƒ¨ç½²åˆ°å…¨çƒCDN                                     â”‚ â”‚
â”‚  â”‚  â€¢ æ™ºèƒ½ç¼“å­˜å’Œä¼˜åŒ–                                        â”‚ â”‚
â”‚  â”‚  â€¢ å®æ—¶é¢„è§ˆå’Œçƒ­é‡è½½                                      â”‚ â”‚
â”‚  â”‚  â€¢ è‡ªåŠ¨SSLè¯ä¹¦                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     APIç½‘å…³       â”‚
                    â”‚  (è´Ÿè½½å‡è¡¡+è·¯ç”±)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              äº‘æœåŠ¡å™¨åç«¯å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  FastAPI åº”ç”¨ (Claude Codeå¼€å‘)                        â”‚ â”‚
â”‚  â”‚  â€¢ AIç”Ÿæˆçš„APIæ¥å£                                      â”‚ â”‚
â”‚  â”‚  â€¢ è‡ªåŠ¨åŒ–æµ‹è¯•å’Œè´¨é‡æ£€æŸ¥                                  â”‚ â”‚
â”‚  â”‚  â€¢ æ™ºèƒ½æ€§èƒ½ç›‘æ§                                        â”‚ â”‚
â”‚  â”‚  â€¢ è‡ªåŠ¨æ‰©å±•å’Œè´Ÿè½½å‡è¡¡                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                äº‘æ•°æ®æœåŠ¡å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ PostgreSQL  â”‚ â”‚    Redis     â”‚ â”‚   Supabase      â”‚         â”‚
â”‚  â”‚ ä¸»æ•°æ®åº“     â”‚ â”‚   ç¼“å­˜å±‚     â”‚ â”‚  æ‰˜ç®¡æœåŠ¡       â”‚         â”‚
â”‚  â”‚ + å¤‡ä»½ç­–ç•¥   â”‚ â”‚ + é›†ç¾¤æ¨¡å¼   â”‚ â”‚ + RLSå®‰å…¨       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### bolt.newå‰ç«¯éƒ¨ç½²é…ç½®
```bash
# bolt.newè‡ªåŠ¨éƒ¨ç½²æµç¨‹
1. å¼€å‘å®Œæˆ â†’ Gitæäº¤
2. è‡ªåŠ¨è§¦å‘CI/CD
3. è‡ªåŠ¨æ„å»ºå’Œæµ‹è¯•
4. è‡ªåŠ¨éƒ¨ç½²åˆ°å…¨çƒCDN
5. è‡ªåŠ¨SSLè¯ä¹¦é…ç½®
6. è‡ªåŠ¨åŸŸåç»‘å®š

# è‡ªå®šä¹‰åŸŸåé…ç½®
# åœ¨bolt.newé¡¹ç›®è®¾ç½®ä¸­ï¼š
Domain: ai-ads.yourdomain.com
SSL: è‡ªåŠ¨é…ç½®ï¼ˆLet's Encryptï¼‰
CDN: å…¨çƒåˆ†å¸ƒå¼éƒ¨ç½²
```

#### äº‘æœåŠ¡å™¨åç«¯éƒ¨ç½²
```yaml
# docker-compose.prod.yml
version: '3.8'

services:
  backend:
    image: ai-ads-backend:latest
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}
      - JWT_SECRET=${JWT_SECRET}
    depends_on:
      - postgres
      - redis
    deploy:
      replicas: 3
      resources:
        limits:
          cpus: '1.0'
          memory: 1G
        reservations:
          cpus: '0.5'
          memory: 512M

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - backend

  postgres:
    image: postgres:15
    environment:
      - POSTGRES_DB=${POSTGRES_DB}
      - POSTGRES_USER=${POSTGRES_USER}
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./backups:/backups

  redis:
    image: redis:alpine
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
```

### 2. ç›‘æ§å’Œè¿ç»´é…ç½®

#### bolt.newå‰ç«¯ç›‘æ§
```typescript
// æ€§èƒ½ç›‘æ§é…ç½®
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 1.0,
  debug: false,
  replaysOnErrorSampleRate: 1.0,
  replaysSessionSampleRate: 0.1,
});

// è‡ªå®šä¹‰æ€§èƒ½æŒ‡æ ‡
const performanceObserver = new PerformanceObserver((list) => {
  const entries = list.getEntries();
  entries.forEach((entry) => {
    if (entry.entryType === 'navigation') {
      const navEntry = entry as PerformanceNavigationTiming;
      console.log('é¡µé¢åŠ è½½æ—¶é—´:', navEntry.loadEventEnd - navEntry.loadEventStart);
    }
  });
});

performanceObserver.observe({ entryTypes: ['navigation', 'resource'] });
```

#### åç«¯ç›‘æ§é…ç½®
```python
# ç›‘æ§ä¸­é—´ä»¶
from fastapi import Request
import time
import logging
from prometheus_client import Counter, Histogram, generate_latest

# PrometheusæŒ‡æ ‡
REQUEST_COUNT = Counter('http_requests_total', 'Total HTTP requests', ['method', 'endpoint', 'status'])
REQUEST_DURATION = Histogram('http_request_duration_seconds', 'HTTP request duration')

@app.middleware("http")
async def monitoring_middleware(request: Request, call_next):
    start_time = time.time()

    response = await call_next(request)

    # è®°å½•æŒ‡æ ‡
    REQUEST_COUNT.labels(
        method=request.method,
        endpoint=request.url.path,
        status=response.status_code
    ).inc()

    REQUEST_DURATION.observe(time.time() - start_time)

    return response

# å¥åº·æ£€æŸ¥ç«¯ç‚¹
@app.get("/health")
async def health_check():
    return {
        "status": "healthy",
        "timestamp": datetime.utcnow().isoformat(),
        "version": "2.2.0",
        "environment": os.getenv("API_ENV", "development")
    }
```

### 3. ä¼ ç»Ÿéƒ¨ç½²æ¶æ„ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è´Ÿè½½å‡è¡¡å±‚                              â”‚
â”‚                   Nginx Reverse Proxy                       â”‚
â”‚                   SSL Termination                           â”‚
â”‚                   Rate Limiting                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åº”ç”¨æœåŠ¡å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Frontend   â”‚              â”‚   Backend    â”‚               â”‚
â”‚  â”‚ Next.js App â”‚              â”‚ FastAPI App  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®æœåŠ¡å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ PostgreSQL  â”‚              â”‚    Redis     â”‚               â”‚
â”‚  â”‚ Supabase    â”‚              â”‚    Cache     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ç›‘æ§é…ç½®
```yaml
# monitoring/prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'ai-ad-spend-backend'
    static_configs:
      - targets: ['backend:8000']
    metrics_path: '/metrics'
    scrape_interval: 15s

  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres-exporter:9187']

  - job_name: 'redis'
    static_configs:
      - targets: ['redis-exporter:9121']

rule_files:
  - "alert_rules.yml"
```

### 3. å‘Šè­¦è§„åˆ™
```yaml
# alert_rules.yml
groups:
  - name: application
    rules:
      - alert: HighErrorRate
        expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "åº”ç”¨é”™è¯¯ç‡è¿‡é«˜"

      - alert: DatabaseDown
        expr: up{job="postgres"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "æ•°æ®åº“è¿æ¥å¤±è´¥"
```

### 4. Nginxé…ç½®
```nginx
# nginx.conf
events {
    worker_connections 1024;
}

http {
    upstream backend {
        server backend:8000;
    }

    upstream frontend {
        server frontend:3000;
    }

    server {
        listen 80;
        server_name yourdomain.com;

        location /api/ {
            proxy_pass http://backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        location / {
            proxy_pass http://frontend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}
```

---

## åã€å¼€å‘é˜¶æ®µåˆ’åˆ†ï¼ˆAIè¾…åŠ©åä½œæ¨¡å¼ï¼‰

### ç¬¬ä¸€é˜¶æ®µï¼šAIåŸºç¡€è®¾æ–½å’Œæ ¸å¿ƒåŠŸèƒ½ï¼ˆ2å‘¨ï¼‰
**ç›®æ ‡**: å»ºç«‹AIè¾…åŠ©å¼€å‘ç¯å¢ƒå’Œæ ¸å¿ƒä¸šåŠ¡æ¡†æ¶

| Day | å‰ç«¯ï¼ˆbolt.new AIå¼€å‘ï¼‰ | åç«¯ï¼ˆClaude Code AIå¼€å‘ï¼‰ | åä½œä»»åŠ¡ | äº¤ä»˜ç‰© |
|-----|----------------------|---------------------------|----------|--------|
| **1-2** | AIç”Ÿæˆé¡¹ç›®æ¶æ„ã€ç»„ä»¶åº“ | AIç”ŸæˆAPIæ¡†æ¶ã€è®¤è¯ç³»ç»Ÿ | é…ç½®ngrokéš§é“ | åŸºç¡€æ¶æ„ |
| **3-4** | AIç”Ÿæˆç”¨æˆ·ç®¡ç†ç•Œé¢ | AIç”Ÿæˆæƒé™ç³»ç»ŸAPI | æ¥å£è”è°ƒæµ‹è¯• | ç”¨æˆ·ç³»ç»Ÿ |
| **5-7** | AIç”Ÿæˆé¡¹ç›®ç®¡ç†ç•Œé¢ | AIç”Ÿæˆé¡¹ç›®ç®¡ç†API | çŠ¶æ€æœºéªŒè¯ | é¡¹ç›®ç®¡ç† |
| **8-9** | AIç”Ÿæˆè´¦æˆ·ç®¡ç†ç•Œé¢ | AIç”Ÿæˆè´¦æˆ·ç®¡ç†API | æ•°æ®æƒé™æµ‹è¯• | è´¦æˆ·ç®¡ç† |
| **10** | AIç”ŸæˆåŸºç¡€æ•°æ®è¡¨æ ¼ | AIç”Ÿæˆæ•°æ®ç»Ÿè®¡API | æ€§èƒ½ä¼˜åŒ–æµ‹è¯• | åŸºç¡€åŠŸèƒ½ |

### ç¬¬äºŒé˜¶æ®µï¼šAIè¾…åŠ©ä¸šåŠ¡æµç¨‹å®ç°ï¼ˆ2å‘¨ï¼‰
**ç›®æ ‡**: å®Œæˆæ ¸å¿ƒä¸šåŠ¡æµç¨‹çš„AIè¾…åŠ©å¼€å‘

| Day | å‰ç«¯ï¼ˆbolt.new AIå¼€å‘ï¼‰ | åç«¯ï¼ˆClaude Code AIå¼€å‘ï¼‰ | åä½œä»»åŠ¡ | äº¤ä»˜ç‰© |
|-----|----------------------|---------------------------|----------|--------|
| **11-12** | AIç”Ÿæˆæ—¥æŠ¥æäº¤è¡¨å• | AIç”Ÿæˆæ—¥æŠ¥å®¡æ ¸API | çŠ¶æ€æµç¨‹æµ‹è¯• | æ—¥æŠ¥ç³»ç»Ÿ |
| **13-14** | AIç”Ÿæˆå®¡æ ¸æµç¨‹ç•Œé¢ | AIç”ŸæˆçŠ¶æ€æœºé€»è¾‘ | ä¸šåŠ¡è§„åˆ™éªŒè¯ | å®¡æ ¸æµç¨‹ |
| **15-16** | AIç”Ÿæˆå……å€¼ç”³è¯·ç•Œé¢ | AIç”Ÿæˆå……å€¼å®¡æ‰¹API | è´¢åŠ¡æµç¨‹æµ‹è¯• | å……å€¼ç³»ç»Ÿ |
| **17-18** | AIç”ŸæˆçŠ¶æ€è·Ÿè¸ªç•Œé¢ | AIç”Ÿæˆé€šçŸ¥ç³»ç»ŸAPI | å®æ—¶åŒæ­¥æµ‹è¯• | é€šçŸ¥ç³»ç»Ÿ |
| **19-20** | AIç”ŸæˆåŸºç¡€æŠ¥è¡¨ç•Œé¢ | AIç”ŸæˆæŠ¥è¡¨API | æ•°æ®å¯è§†åŒ–æµ‹è¯• | æŠ¥è¡¨ç³»ç»Ÿ |

### ç¬¬ä¸‰é˜¶æ®µï¼šAIä¼˜åŒ–å’Œç³»ç»Ÿé›†æˆï¼ˆ1å‘¨ï¼‰
**ç›®æ ‡**: AIé©±åŠ¨çš„æ€§èƒ½ä¼˜åŒ–å’Œç³»ç»Ÿé›†æˆ

| Day | å‰ç«¯ï¼ˆbolt.new AIå¼€å‘ï¼‰ | åç«¯ï¼ˆClaude Code AIå¼€å‘ï¼‰ | åä½œä»»åŠ¡ | äº¤ä»˜ç‰© |
|-----|----------------------|---------------------------|----------|--------|
| **21-22** | AIæ€§èƒ½ä¼˜åŒ–å»ºè®® | AIæ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ– | è´Ÿè½½æµ‹è¯• | æ€§èƒ½ä¼˜åŒ– |
| **23-24** | AIå®‰å…¨æ¼æ´æ‰«æ | AIå®‰å…¨ç­–ç•¥å®ç° | å®‰å…¨æµ‹è¯• | å®‰å…¨åŠ å›º |
| **25** | AIç”¨æˆ·ä½“éªŒä¼˜åŒ– | AIè‡ªåŠ¨åŒ–æµ‹è¯•ç”Ÿæˆ | ç«¯åˆ°ç«¯æµ‹è¯• | ç³»ç»Ÿé›†æˆ |

### ç¬¬å››é˜¶æ®µï¼šAIæµ‹è¯•å’Œéƒ¨ç½²å‡†å¤‡ï¼ˆ1å‘¨ï¼‰
**ç›®æ ‡**: AIè¾…åŠ©çš„å…¨é¢æµ‹è¯•å’Œç”Ÿäº§éƒ¨ç½²

| Day | å‰ç«¯ï¼ˆbolt.new AIå¼€å‘ï¼‰ | åç«¯ï¼ˆClaude Code AIå¼€å‘ï¼‰ | åä½œä»»åŠ¡ | äº¤ä»˜ç‰© |
|-----|----------------------|---------------------------|----------|--------|
| **26** | AIç”Ÿæˆç”¨æˆ·æµ‹è¯•ç”¨ä¾‹ | AIç”ŸæˆAPIæµ‹è¯•ç”¨ä¾‹ | æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œ | æµ‹è¯•è¦†ç›– |
| **27** | AIä¼˜åŒ–éƒ¨ç½²é…ç½® | AIç”Ÿæˆç›‘æ§é…ç½® | ç›‘æ§ç³»ç»Ÿæµ‹è¯• | è¿ç»´ç›‘æ§ |
| **28** | AIç”Ÿæˆç”¨æˆ·æ–‡æ¡£ | AIç”ŸæˆAPIæ–‡æ¡£ | æ–‡æ¡£å®¡æ ¸ | æŠ€æœ¯æ–‡æ¡£ |

## AIè¾…åŠ©å¼€å‘æ•ˆç‡å¯¹æ¯”

### ä¼ ç»Ÿå¼€å‘ vs AIè¾…åŠ©å¼€å‘
| å¼€å‘é˜¶æ®µ | ä¼ ç»Ÿæ–¹å¼ | AIè¾…åŠ©å¼€å‘ | æ•ˆç‡æå‡ |
|----------|----------|------------|----------|
| **åŸºç¡€æ¶æ„** | 3-5å¤© | 1-2å¤© | 60-70% |
| **CRUDå¼€å‘** | 5-7å¤©/æ¨¡å— | 1-2å¤©/æ¨¡å— | 70-80% |
| **è¡¨å•å¼€å‘** | 2-3å¤©/è¡¨å• | 0.5-1å¤©/è¡¨å• | 75-80% |
| **æµ‹è¯•ç¼–å†™** | 2-3å¤©/æ¨¡å— | 0.5-1å¤©/æ¨¡å— | 75-85% |
| **æ–‡æ¡£ç¼–å†™** | 1-2å¤©/æ¨¡å— | è‡ªåŠ¨ç”Ÿæˆ | 95-100% |
| **æ€»å¼€å‘å‘¨æœŸ** | 4-6å‘¨ | 2å‘¨ | 65-75% |

### AIå¼€å‘è´¨é‡ä¿è¯
- **ä»£ç è§„èŒƒéµå¾ª**: AIè‡ªåŠ¨æ£€æŸ¥ï¼Œ100%éµå¾ªè§„èŒƒ
- **æµ‹è¯•è¦†ç›–ç‡**: AIç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œ95%+è¦†ç›–ç‡
- **å®‰å…¨æ¼æ´**: AIè‡ªåŠ¨æ‰«æï¼Œ90%+æ¼æ´è‡ªåŠ¨ä¿®å¤
- **æ€§èƒ½ä¼˜åŒ–**: AIæ™ºèƒ½åˆ†æï¼Œ80%+æ€§èƒ½é—®é¢˜é¢„é˜²

### å¤‡ç”¨P0/P1/P2ä¼ ç»Ÿé˜¶æ®µåˆ’åˆ†ï¼ˆä»…ä½œå‚è€ƒï¼‰
#### P0é˜¶æ®µï¼šæ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ï¼ˆ3-4å‘¨ï¼‰

### P1é˜¶æ®µï¼šè´¢åŠ¡å’Œæ•°æ®ï¼ˆ2-3å‘¨ï¼‰
| æ¨¡å— | åŠŸèƒ½ | ä¼˜å…ˆçº§ | äº§å‡ºç‰© |
|------|------|--------|--------|
| **å¯¹è´¦æ¨¡å—** | è‡ªåŠ¨å¯¹è´¦ã€å·®å¼‚åˆ†æ | P1 | å¯¹è´¦ç³»ç»Ÿã€æŠ¥è¡¨ |
| **è´¢åŠ¡ç®¡ç†** | é¢„ç®—ç®¡ç†ã€æˆæœ¬åˆ†æ | P1 | è´¢åŠ¡åˆ†ææ¨¡å— |
| **æ•°æ®å¯¼å…¥** | æ‰¹é‡å¯¼å…¥ã€æ•°æ®æ¸…æ´— | P1 | æ•°æ®å¯¼å…¥å·¥å…· |
| **åŸºç¡€æŠ¥è¡¨** | æ¶ˆè€—æŠ¥è¡¨ã€è½¬åŒ–æŠ¥è¡¨ | P1 | æŠ¥è¡¨ç³»ç»Ÿ |

### P2é˜¶æ®µï¼šAIå’Œè‡ªåŠ¨åŒ–ï¼ˆ2-3å‘¨ï¼‰
| æ¨¡å— | åŠŸèƒ½ | ä¼˜å…ˆçº§ | äº§å‡ºç‰© |
|------|------|--------|--------|
| **AIæ£€æµ‹** | å¼‚å¸¸æ£€æµ‹ã€æ€§èƒ½åˆ†æ | P2 | AIç›‘æ§æ¨¡å— |
| **é¢„æµ‹æ¨¡å—** | è´¦æˆ·å¯¿å‘½é¢„æµ‹ã€è¶‹åŠ¿åˆ†æ | P2 | é¢„æµ‹ç³»ç»Ÿ |
| **è‡ªåŠ¨åŒ–é€šçŸ¥** | é‚®ä»¶é€šçŸ¥ã€æ¶ˆæ¯æ¨é€ | P2 | é€šçŸ¥ç³»ç»Ÿ |
| **é«˜çº§æŠ¥è¡¨** | å¤šç»´åº¦åˆ†æã€è‡ªå®šä¹‰æŠ¥è¡¨ | P2 | é«˜çº§æŠ¥è¡¨ç³»ç»Ÿ |

### P3é˜¶æ®µï¼šæ€§èƒ½å’Œæ‰©å±•ï¼ˆ1-2å‘¨ï¼‰
| æ¨¡å— | åŠŸèƒ½ | ä¼˜å…ˆçº§ | äº§å‡ºç‰© |
|------|------|--------|--------|
| **æ€§èƒ½ä¼˜åŒ–** | æ•°æ®åº“ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥ | P3 | æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ |
| **ç›‘æ§å‘Šè­¦** | å…¨é¢ç›‘æ§ã€æ™ºèƒ½å‘Šè­¦ | P3 | ç›‘æ§ç³»ç»Ÿ |
| **å®¹ç¾å¤‡ä»½** | æ•°æ®å¤‡ä»½ã€æ•…éšœæ¢å¤ | P3 | å¤‡ä»½æ¢å¤æ–¹æ¡ˆ |
| **APIæ–‡æ¡£** | å®Œæ•´APIæ–‡æ¡£ã€SDK | P3 | APIæ–‡æ¡£ä¸­å¿ƒ |

---

## åä¸€ã€éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶æ ‡å‡†
- âœ… **æ ¸å¿ƒæµç¨‹å®Œæ•´**ï¼šæ—¥æŠ¥æäº¤â†’å®¡æ ¸â†’æ•°æ®ç¡®è®¤ï¼›å……å€¼ç”³è¯·â†’å®¡æ ¸â†’æ”¯ä»˜â†’å…¥è´¦
- âœ… **æƒé™æ§åˆ¶ä¸¥æ ¼**ï¼šæ‰€æœ‰æ“ä½œéƒ½æœ‰æƒé™éªŒè¯ï¼ŒRLSç­–ç•¥ç”Ÿæ•ˆ
- âœ… **çŠ¶æ€æœºæ­£ç¡®**ï¼šæ‰€æœ‰çŠ¶æ€è½¬æ¢éƒ½ç¬¦åˆä¸šåŠ¡è§„åˆ™ï¼Œä¸å…è®¸è·³çº§
- âœ… **æ•°æ®ä¸€è‡´æ€§**ï¼šæ‰€æœ‰èµ„é‡‘è¡¨éƒ½åŒ…å«å®Œæ•´çš„å¤–é”®è¿½æº¯

### æŠ€æœ¯éªŒæ”¶æ ‡å‡†
- âœ… **APIå“åº”ç»Ÿä¸€**ï¼šæ‰€æœ‰APIéƒ½éµå¾ªç»Ÿä¸€çš„å“åº”æ ¼å¼å’Œé”™è¯¯ç è§„èŒƒ
- âœ… **æ—¥å¿—è®°å½•å®Œæ•´**ï¼šæ‰€æœ‰å†™æ“ä½œéƒ½è®°å½•æ“ä½œæ—¥å¿—ï¼Œæ”¯æŒå®¡è®¡è¿½è¸ª
- âœ… **æ€§èƒ½è¾¾æ ‡**ï¼šAPIå“åº”æ—¶é—´<200msï¼Œæ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–åˆ°ä½
- âœ… **å®‰å…¨é…ç½®**ï¼šJWTã€CORSã€é™æµç­‰å®‰å…¨æªæ–½é…ç½®å®Œå–„

### è¿ç»´éªŒæ”¶æ ‡å‡†
- âœ… **ç›‘æ§è¦†ç›–**ï¼šå…³é”®ä¸šåŠ¡æŒ‡æ ‡ã€ç³»ç»Ÿæ€§èƒ½éƒ½æœ‰ç›‘æ§è¦†ç›–
- âœ… **å‘Šè­¦åŠæ—¶**ï¼šå¼‚å¸¸æƒ…å†µèƒ½åŠæ—¶å‘ç°å’Œé€šçŸ¥
- âœ… **å¤‡ä»½å¯é **ï¼šæ•°æ®å¤‡ä»½å’Œæ¢å¤æµç¨‹ç»è¿‡éªŒè¯
- âœ… **éƒ¨ç½²è‡ªåŠ¨åŒ–**ï¼šæ”¯æŒä¸€é”®éƒ¨ç½²å’Œå›æ»š

### æ–‡æ¡£éªŒæ”¶æ ‡å‡†
- âœ… **APIæ–‡æ¡£å®Œæ•´**ï¼šæ‰€æœ‰æ¥å£éƒ½æœ‰è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹
- âœ… **éƒ¨ç½²æ–‡æ¡£æ¸…æ™°**ï¼šéƒ¨ç½²æ­¥éª¤æ¸…æ™°ï¼Œé…ç½®æ–‡ä»¶å®Œæ•´
- âœ… **è¿ç»´æ‰‹å†Œè¯¦ç»†**ï¼šæ•…éšœå¤„ç†ã€æ€§èƒ½è°ƒä¼˜æŒ‡å—å®Œå–„
- âœ… **ä»£ç è§„èŒƒç»Ÿä¸€**ï¼šä»£ç é£æ ¼ç»Ÿä¸€ï¼Œæ³¨é‡Šå®Œæ•´

### AIè¾…åŠ©å¼€å‘éªŒæ”¶æ ‡å‡†
- âœ… **AIä»£ç è´¨é‡**ï¼šAIç”Ÿæˆçš„ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒï¼Œé€šè¿‡ä»£ç å®¡æŸ¥
- âœ… **æµ‹è¯•è¦†ç›–ç‡**ï¼šAIç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹è¦†ç›–95%ä»¥ä¸Šä»£ç è·¯å¾„
- âœ… **æ€§èƒ½åŸºå‡†è¾¾æ ‡**ï¼šAIä¼˜åŒ–çš„ä»£ç æ»¡è¶³æ€§èƒ½è¦æ±‚ï¼Œå“åº”æ—¶é—´<200ms
- âœ… **å®‰å…¨æ‰«æé€šè¿‡**ï¼šAIè‡ªåŠ¨å®‰å…¨æ‰«ææ— é«˜å±æ¼æ´ï¼Œé€šè¿‡å®‰å…¨å®¡è®¡
- âœ… **æ–‡æ¡£åŒæ­¥å®Œæ•´**ï¼šAIç”Ÿæˆçš„æ–‡æ¡£ä¸ä»£ç ä¿æŒåŒæ­¥ï¼Œå‡†ç¡®å¯é 

---

## åäºŒã€AIè¾…åŠ©å¼€å‘æ¨¡å¼

### 1. AIè¾…åŠ©å¼€å‘æ¶æ„

#### å‰ç«¯AIå¼€å‘ï¼ˆbolt.newï¼‰
```typescript
// AIç»„ä»¶ç”Ÿæˆç¤ºä¾‹
/**
 * ç”¨æˆ·æè¿°ï¼š
 * "åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç®¡ç†é¡µé¢ï¼ŒåŒ…å«ç”¨æˆ·åˆ—è¡¨ã€æœç´¢ã€ç­›é€‰å’Œåˆ†é¡µåŠŸèƒ½"
 */

// AIç”Ÿæˆçš„ç»„ä»¶
interface UserManagementProps {
  users: User[];
  loading: boolean;
  onUserUpdate: (user: User) => void;
  onUserDelete: (userId: string) => void;
}

export const UserManagement: React.FC<UserManagementProps> = ({
  users,
  loading,
  onUserUpdate,
  onUserDelete
}) => {
  // AIè‡ªåŠ¨ç”Ÿæˆçš„çŠ¶æ€ç®¡ç†å’Œé€»è¾‘
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedUsers, setSelectedUsers] = useState<string[]>([]);

  // AIè‡ªåŠ¨ç”Ÿæˆçš„æœç´¢å’Œç­›é€‰é€»è¾‘
  const filteredUsers = useMemo(() => {
    return users.filter(user =>
      user.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      user.email.toLowerCase().includes(searchTerm.toLowerCase())
    );
  }, [users, searchTerm]);

  return (
    <div className="user-management">
      {/* AIè‡ªåŠ¨ç”Ÿæˆçš„UIç»„ä»¶ */}
      <SearchBar onSearch={setSearchTerm} />
      <FilterBar selectedUsers={selectedUsers} onSelectionChange={setSelectedUsers} />
      <UserTable
        users={filteredUsers}
        loading={loading}
        onUpdate={onUserUpdate}
        onDelete={onUserDelete}
      />
      <Pagination />
    </div>
  );
};
```

#### åç«¯AIå¼€å‘ï¼ˆClaude Codeï¼‰
```python
# AI APIç”Ÿæˆç¤ºä¾‹
"""
ç”¨æˆ·æè¿°ï¼š
"åˆ›å»ºç”¨æˆ·ç®¡ç†APIï¼ŒåŒ…å«CRUDæ“ä½œã€æƒé™éªŒè¯å’Œæ‰¹é‡æ“ä½œåŠŸèƒ½"
"""

# AIç”Ÿæˆçš„FastAPIè·¯ç”±
from fastapi import APIRouter, Depends, HTTPException, status
from sqlalchemy.orm import Session
from typing import List, Optional
import uuid

router = APIRouter(prefix="/api/v1/users", tags=["users"])

@router.get("/", response_model=List[UserResponse])
async def get_users(
    skip: int = 0,
    limit: int = 100,
    search: Optional[str] = None,
    role: Optional[str] = None,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user),
    _: bool = Depends(require_permission("user:read"))
):
    """
    AIç”Ÿæˆçš„è·å–ç”¨æˆ·åˆ—è¡¨æ¥å£
    åŒ…å«åˆ†é¡µã€æœç´¢ã€ç­›é€‰åŠŸèƒ½
    """
    # AIè‡ªåŠ¨å®ç°çš„å¤æ‚æŸ¥è¯¢é€»è¾‘
    query = db.query(User)

    if search:
        query = query.filter(
            User.name.ilike(f"%{search}%") |
            User.email.ilike(f"%{search}%")
        )

    if role:
        query = query.filter(User.role == role)

    # AIè‡ªåŠ¨æ·»åŠ çš„æƒé™è¿‡æ»¤
    if current_user.role != "admin":
        query = query.filter(User.is_active == True)

    users = query.offset(skip).limit(limit).all()
    return users

@router.post("/", response_model=UserResponse)
async def create_user(
    user_data: UserCreate,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user),
    _: bool = Depends(require_permission("user:create"))
):
    """
    AIç”Ÿæˆçš„åˆ›å»ºç”¨æˆ·æ¥å£
    åŒ…å«æ•°æ®éªŒè¯ã€æƒé™æ£€æŸ¥å’Œå®¡è®¡æ—¥å¿—
    """
    # AIè‡ªåŠ¨å®ç°çš„ä¸šåŠ¡é€»è¾‘
    existing_user = db.query(User).filter(User.email == user_data.email).first()
    if existing_user:
        raise HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail="é‚®ç®±å·²å­˜åœ¨"
        )

    # AIè‡ªåŠ¨ç”Ÿæˆçš„å¯†ç åŠ å¯†
    hashed_password = bcrypt.hashpw(user_data.password.encode(), bcrypt.gensalt())

    user = User(
        **user_data.dict(exclude={"password"}),
        password_hash=hashed_password.decode(),
        id=str(uuid.uuid4()),
        created_by=current_user.id
    )

    db.add(user)
    db.commit()
    db.refresh(user)

    # AIè‡ªåŠ¨ç”Ÿæˆçš„å®¡è®¡æ—¥å¿—
    log_action("user", "create", current_user.id, user.id)

    return user
```

### 2. AIå¼€å‘å·¥ä½œæµ

#### è¯·æ±‚-ç”Ÿæˆ-éªŒè¯å¾ªç¯
```mermaid
graph TD
    A[ä¸šåŠ¡éœ€æ±‚æè¿°] --> B[AIç†è§£éœ€æ±‚]
    B --> C[AIç”Ÿæˆä»£ç ]
    C --> D[AIè‡ªåŠ¨æµ‹è¯•]
    D --> E{æµ‹è¯•é€šè¿‡?}
    E -->|å¦| F[AIä¿®å¤ä»£ç ]
    F --> D
    E -->|æ˜¯| G[äººå·¥å®¡æŸ¥]
    G --> H{å®¡æŸ¥é€šè¿‡?}
    H -->|å¦| I[äººå·¥ä¿®æ­£]
    I --> G
    H -->|æ˜¯| J[ä»£ç åˆå¹¶]
    J --> K[è‡ªåŠ¨éƒ¨ç½²]
```

#### AIè´¨é‡æ§åˆ¶æµç¨‹
```python
# AIä»£ç è´¨é‡æ£€æŸ¥å™¨
class AICodeQualityChecker:
    def __init__(self):
        self.rules = [
            CodeStyleRule(),
            SecurityRule(),
            PerformanceRule(),
            TestCoverageRule()
        ]

    def check_code(self, code: str) -> QualityReport:
        """AIè‡ªåŠ¨ä»£ç è´¨é‡æ£€æŸ¥"""
        report = QualityReport()

        for rule in self.rules:
            result = rule.check(code)
            report.add_result(rule.name, result)

        # AIè‡ªåŠ¨ç”Ÿæˆæ”¹è¿›å»ºè®®
        if not report.is_passed():
            report.improvement_suggestions = self.generate_suggestions(report)

        return report

    def generate_suggestions(self, report: QualityReport) -> List[str]:
        """AIç”Ÿæˆä»£ç æ”¹è¿›å»ºè®®"""
        suggestions = []

        for violation in report.violations:
            if violation.type == "performance":
                suggestions.append(f"æ€§èƒ½ä¼˜åŒ–å»ºè®®: {violation.suggestion}")
            elif violation.type == "security":
                suggestions.append(f"å®‰å…¨åŠ å›ºå»ºè®®: {violation.suggestion}")
            elif violation.type == "style":
                suggestions.append(f"ä»£ç è§„èŒƒå»ºè®®: {violation.suggestion}")

        return suggestions
```

### 3. AIæµ‹è¯•ç”Ÿæˆ

#### è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ
```python
# AIç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹
@pytest.fixture
def sample_user_data():
    """AIç”Ÿæˆçš„æµ‹è¯•æ•°æ®"""
    return {
        "name": "æµ‹è¯•ç”¨æˆ·",
        "email": "test@example.com",
        "role": "media_buyer",
        "password": "testpassword123"
    }

class TestUserAPI:
    """AIç”Ÿæˆçš„ç”¨æˆ·APIæµ‹è¯•ç±»"""

    def test_create_user_success(self, client, sample_user_data):
        """AIç”Ÿæˆçš„æˆåŠŸæµ‹è¯•ç”¨ä¾‹"""
        response = client.post("/api/v1/users/", json=sample_user_data)

        assert response.status_code == 200
        data = response.json()
        assert data["success"] is True
        assert data["data"]["email"] == sample_user_data["email"]
        assert "id" in data["data"]
        assert "password_hash" not in data["data"]  # AIè‡ªåŠ¨æ£€æŸ¥æ•æ„Ÿä¿¡æ¯

    def test_create_user_duplicate_email(self, client, sample_user_data):
        """AIç”Ÿæˆçš„é‡å¤é‚®ç®±æµ‹è¯•ç”¨ä¾‹"""
        # å…ˆåˆ›å»ºç”¨æˆ·
        client.post("/api/v1/users/", json=sample_user_data)

        # å†æ¬¡åˆ›å»ºç›¸åŒé‚®ç®±çš„ç”¨æˆ·
        response = client.post("/api/v1/users/", json=sample_user_data)

        assert response.status_code == 400
        data = response.json()
        assert data["success"] is False
        assert "é‚®ç®±å·²å­˜åœ¨" in data["error"]["message"]

    def test_unauthorized_access(self, client):
        """AIç”Ÿæˆçš„æƒé™æµ‹è¯•ç”¨ä¾‹"""
        response = client.get("/api/v1/users/")

        assert response.status_code == 401
        data = response.json()
        assert data["error"]["code"] == "UNAUTHORIZED"
```

### 4. AIæ–‡æ¡£ç”Ÿæˆ

#### è‡ªåŠ¨åŒ–APIæ–‡æ¡£ç”Ÿæˆ
```python
# AIç”Ÿæˆçš„APIæ–‡æ¡£è£…é¥°å™¨
def auto_document(
    summary: str,
    description: str = None,
    tags: List[str] = None,
    examples: List[dict] = None
):
    """AIè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£çš„è£…é¥°å™¨"""
    def decorator(func):
        func.__doc__ = f"""
        {summary}

        {description or ""}

        Args:
            å„å‚æ•°è¯´æ˜ç”±AIè‡ªåŠ¨ç”Ÿæˆ

        Returns:
            è¿”å›å€¼è¯´æ˜ç”±AIè‡ªåŠ¨ç”Ÿæˆ

        Examples:
            {json.dumps(examples or [], indent=2, ensure_ascii=False)}
        """
        return func
    return decorator

# ä½¿ç”¨AIè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£
@router.post("/users/",
    response_model=UserResponse,
    summary="åˆ›å»ºæ–°ç”¨æˆ·",
    description="åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·è´¦æˆ·ï¼ŒåŒ…å«å®Œæ•´çš„æƒé™éªŒè¯å’Œå®¡è®¡æ—¥å¿—",
    examples=[{
        "request": {
            "name": "å¼ ä¸‰",
            "email": "zhangsan@example.com",
            "role": "media_buyer",
            "password": "password123"
        },
        "response": {
            "id": "uuid-string",
            "name": "å¼ ä¸‰",
            "email": "zhangsan@example.com",
            "role": "media_buyer",
            "is_active": True,
            "created_at": "2025-11-11T10:30:00Z"
        }
    }]
)
async def create_user(user_data: UserCreate):
    pass
```

---

## åä¸‰ã€AIè¾…åŠ©å¼€å‘æœ€ä½³å®è·µ

### 1. éœ€æ±‚æè¿°æœ€ä½³å®è·µ

#### æ¸…æ™°çš„éœ€æ±‚æè¿°
```markdown
# å¥½çš„éœ€æ±‚æè¿°ç¤ºä¾‹
**åŠŸèƒ½**: å……å€¼ç”³è¯·å®¡æ‰¹æµç¨‹
**ç”¨æˆ·è§’è‰²**: æŠ•æ‰‹ã€æˆ·ç®¡ã€è´¢åŠ¡
**ä¸šåŠ¡æµç¨‹**:
1. æŠ•æ‰‹æäº¤å……å€¼ç”³è¯·ï¼ˆé‡‘é¢ã€ç”¨é€”ã€è´¦æˆ·ï¼‰
2. æˆ·ç®¡å®¡æ ¸ç”³è¯·çš„åˆç†æ€§å’Œæƒé™
3. è´¢åŠ¡å®¡æ ¸å¹¶æ‰§è¡Œæ”¯ä»˜
4. ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°è´¦æˆ·ä½™é¢

**æŠ€æœ¯è¦æ±‚**:
- çŠ¶æ€æœºï¼šdraft â†’ pending â†’ approved â†’ paid â†’ posted
- æƒé™æ§åˆ¶ï¼šæ¯ä¸ªè§’è‰²åªèƒ½æ“ä½œå¯¹åº”çš„çŠ¶æ€
- å®¡è®¡æ—¥å¿—ï¼šè®°å½•æ‰€æœ‰çŠ¶æ€å˜æ›´
- å®æ—¶é€šçŸ¥ï¼šçŠ¶æ€å˜æ›´æ—¶é€šçŸ¥ç›¸å…³äººå‘˜
```

#### é¿å…çš„æè¿°æ–¹å¼
```markdown
# éœ€è¦é¿å…çš„æ¨¡ç³Šæè¿°
âŒ "åšä¸€ä¸ªå……å€¼åŠŸèƒ½"
âŒ "å®ç°å®¡æ‰¹æµç¨‹"
âŒ "æ”¯æŒçŠ¶æ€ç®¡ç†"

# åº”è¯¥ä½¿ç”¨çš„å…·ä½“æè¿°
âœ… "å®ç°å……å€¼ç”³è¯·çš„ä¸‰çº§å®¡æ‰¹æµç¨‹ï¼ŒåŒ…å«æŠ•æ‰‹æäº¤ã€æˆ·ç®¡å®¡æ ¸ã€è´¢åŠ¡æ”¯ä»˜ä¸‰ä¸ªæ­¥éª¤"
âœ… "åˆ›å»ºå……å€¼ç”³è¯·çŠ¶æ€æœºï¼Œæ”¯æŒdraftã€pendingã€approvedã€paidã€postedäº”ä¸ªçŠ¶æ€"
âœ… "å®ç°åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ï¼Œç¡®ä¿æ¯ä¸ªè§’è‰²åªèƒ½æ“ä½œå¯¹åº”çš„ç”³è¯·çŠ¶æ€"
```

### 2. AIä»£ç å®¡æŸ¥æœ€ä½³å®è·µ

#### å¤šå±‚å®¡æŸ¥æœºåˆ¶
```python
# ç¬¬ä¸€å±‚ï¼šAIè‡ªæ£€
def ai_self_check(code: str) -> bool:
    """AIè‡ªåŠ¨æ£€æŸ¥ä»£ç è´¨é‡"""
    checks = [
        check_code_style(code),
        check_security_issues(code),
        check_performance_problems(code),
        check_test_coverage(code)
    ]
    return all(checks)

# ç¬¬äºŒå±‚ï¼šAIäº¤å‰æ£€æŸ¥
def ai_cross_check(original_code: str, optimized_code: str) -> dict:
    """AIäº¤å‰æ£€æŸ¥ä»£ç ä¼˜åŒ–è´¨é‡"""
    comparison = {
        "improvements": [],
        "regressions": [],
        "security_impact": [],
        "performance_impact": []
    }

    # AIè‡ªåŠ¨åˆ†æä»£ç æ”¹è¿›
    comparison["improvements"] = analyze_improvements(original_code, optimized_code)
    comparison["regressions"] = detect_regressions(original_code, optimized_code)

    return comparison

# ç¬¬ä¸‰å±‚ï¼šäººå·¥å®¡æŸ¥æ¸…å•
def human_review_checklist(code: dict) -> List[str]:
    """äººå·¥å®¡æŸ¥æ¸…å•"""
    checklist = [
        "ä¸šåŠ¡é€»è¾‘æ˜¯å¦æ­£ç¡®ï¼Ÿ",
        "ç”¨æˆ·ç•Œé¢æ˜¯å¦å‹å¥½ï¼Ÿ",
        "é”™è¯¯å¤„ç†æ˜¯å¦å®Œå–„ï¼Ÿ",
        "æ€§èƒ½æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼Ÿ",
        "å®‰å…¨é…ç½®æ˜¯å¦åˆ°ä½ï¼Ÿ"
    ]

    return checklist
```

### 3. AIæµ‹è¯•æœ€ä½³å®è·µ

#### æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç­–ç•¥
```python
# AIæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨
class AITestGenerator:
    def generate_unit_tests(self, function_code: str) -> str:
        """AIç”Ÿæˆå•å…ƒæµ‹è¯•"""
        # AIåˆ†æå‡½æ•°é€»è¾‘
        function_analysis = self.analyze_function(function_code)

        # AIç”Ÿæˆæ­£å¸¸è·¯å¾„æµ‹è¯•
        normal_cases = self.generate_normal_cases(function_analysis)

        # AIç”Ÿæˆå¼‚å¸¸è·¯å¾„æµ‹è¯•
        exception_cases = self.generate_exception_cases(function_analysis)

        # AIç”Ÿæˆè¾¹ç•Œæ¡ä»¶æµ‹è¯•
        boundary_cases = self.generate_boundary_cases(function_analysis)

        return self.combine_test_cases(normal_cases, exception_cases, boundary_cases)

    def generate_integration_tests(self, api_spec: dict) -> str:
        """AIç”Ÿæˆé›†æˆæµ‹è¯•"""
        # AIåˆ†æAPIä¾èµ–å…³ç³»
        dependencies = self.analyze_dependencies(api_spec)

        # AIç”Ÿæˆç«¯åˆ°ç«¯æµ‹è¯•åœºæ™¯
        scenarios = self.generate_e2e_scenarios(dependencies)

        # AIç”Ÿæˆæ•°æ®ä¸€è‡´æ€§æµ‹è¯•
        consistency_tests = self.generate_consistency_tests(api_spec)

        return self.combine_integration_tests(scenarios, consistency_tests)
```

### 4. AIæ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ

#### æ™ºèƒ½æ€§èƒ½åˆ†æ
```python
class AIPerformanceOptimizer:
    def analyze_query_performance(self, query: str) -> dict:
        """AIåˆ†ææŸ¥è¯¢æ€§èƒ½"""
        analysis = {
            "complexity": self.calculate_complexity(query),
            "bottlenecks": self.identify_bottlenecks(query),
            "optimization_suggestions": [],
            "estimated_improvement": 0
        }

        # AIç”Ÿæˆä¼˜åŒ–å»ºè®®
        if analysis["complexity"] > "O(nÂ²)":
            analysis["optimization_suggestions"].append("è€ƒè™‘ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–")
            analysis["estimated_improvement"] += 50

        if "JOIN" in query and "ORDER BY" in query:
            analysis["optimization_suggestions"].append("è€ƒè™‘æ·»åŠ å¤åˆç´¢å¼•")
            analysis["estimated_improvement"] += 30

        return analysis

    def generate_optimized_code(self, original_code: str) -> str:
        """AIç”Ÿæˆä¼˜åŒ–ä»£ç """
        # AIè¯†åˆ«æ€§èƒ½é—®é¢˜
        issues = self.identify_performance_issues(original_code)

        # AIåº”ç”¨ä¼˜åŒ–ç­–ç•¥
        optimized_code = original_code
        for issue in issues:
            optimized_code = self.apply_optimization(optimized_code, issue)

        return optimized_code
```

### 5. AIå®‰å…¨æœ€ä½³å®è·µ

#### å®‰å…¨æ¼æ´è‡ªåŠ¨æ£€æµ‹
```python
class AISecurityScanner:
    def scan_for_vulnerabilities(self, code: str) -> List[SecurityIssue]:
        """AIè‡ªåŠ¨æ‰«æå®‰å…¨æ¼æ´"""
        issues = []

        # AIæ£€æµ‹SQLæ³¨å…¥é£é™©
        sql_injection_risks = self.detect_sql_injection(code)
        issues.extend(sql_injection_risks)

        # AIæ£€æµ‹XSSé£é™©
        xss_risks = self.detect_xss(code)
        issues.extend(xss_risks)

        # AIæ£€æµ‹æƒé™ç»•è¿‡é£é™©
        auth_risks = self.detect_auth_bypass(code)
        issues.extend(auth_risks)

        # AIæ£€æµ‹æ•æ„Ÿä¿¡æ¯æ³„éœ²
        data_leak_risks = self.detect_data_leak(code)
        issues.extend(data_leak_risks)

        return issues

    def auto_fix_security_issues(self, code: str, issues: List[SecurityIssue]) -> str:
        """AIè‡ªåŠ¨ä¿®å¤å®‰å…¨é—®é¢˜"""
        fixed_code = code

        for issue in issues:
            if issue.severity == "high":
                fixed_code = self.apply_security_fix(fixed_code, issue)

        return fixed_code
```

### 6. AIå¼€å‘å›¢é˜Ÿåä½œæœ€ä½³å®è·µ

#### åä½œå·¥ä½œæµç¨‹
```mermaid
graph LR
    A[äº§å“ç»ç†] --> B[éœ€æ±‚æ–‡æ¡£]
    B --> C[AIåˆ†æéœ€æ±‚]
    C --> D[AIç”Ÿæˆä»£ç ]
    D --> E[AIè‡ªåŠ¨æµ‹è¯•]
    E --> F[å¼€å‘äººå‘˜å®¡æŸ¥]
    F --> G[å®‰å…¨å›¢é˜Ÿå®¡æ ¸]
    G --> H[è‡ªåŠ¨åŒ–éƒ¨ç½²]
    H --> I[ç›‘æ§ç³»ç»Ÿ]
```

#### è´¨é‡ä¿è¯æµç¨‹
```python
class AIDevelopmentWorkflow:
    def __init__(self):
        self.quality_gates = [
            CodeQualityGate(),
            SecurityGate(),
            PerformanceGate(),
            TestCoverageGate()
        ]

    def execute_workflow(self, requirements: str) -> WorkflowResult:
        """æ‰§è¡ŒAIè¾…åŠ©å¼€å‘å·¥ä½œæµ"""
        result = WorkflowResult()

        # ç¬¬ä¸€æ­¥ï¼šAIç†è§£éœ€æ±‚
        requirement_analysis = self.ai_analyze_requirements(requirements)
        result.requirement_analysis = requirement_analysis

        # ç¬¬äºŒæ­¥ï¼šAIç”Ÿæˆä»£ç 
        generated_code = self.ai_generate_code(requirement_analysis)
        result.generated_code = generated_code

        # ç¬¬ä¸‰æ­¥ï¼šè´¨é‡æ£€æŸ¥
        for gate in self.quality_gates:
            gate_result = gate.check(generated_code)
            result.quality_results[gate.name] = gate_result

            if not gate_result.passed:
                # AIè‡ªåŠ¨ä¿®å¤
                fixed_code = self.ai_auto_fix(generated_code, gate_result.issues)
                generated_code = fixed_code

        result.final_code = generated_code
        return result
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [SYSTEM_OVERVIEW.md](./SYSTEM_OVERVIEW.md) - ç³»ç»Ÿæ¶æ„è¯¦ç»†è¯´æ˜
- [BACKEND_API_GUIDE.md](./BACKEND_API_GUIDE.md) - åç«¯APIå¼€å‘æŒ‡å—
- [DATA_SCHEMA.md](./DATA_SCHEMA.md) - æ•°æ®åº“è¯¦ç»†è®¾è®¡
- [FRONTEND_GUIDE.md](./FRONTEND_GUIDE.md) - å‰ç«¯å¼€å‘æŒ‡å—
- [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md) - éƒ¨ç½²è¿ç»´æŒ‡å—
- [SECURITY_CONFIG.md](./SECURITY_CONFIG.md) - å®‰å…¨é…ç½®è§„èŒƒ
- [TESTING_STRATEGY.md](./TESTING_STRATEGY.md) - æµ‹è¯•ç­–ç•¥æ–‡æ¡£
- [MONITORING_OPS.md](./MONITORING_OPS.md) - ç›‘æ§è¿ç»´æ–‡æ¡£
- [STATE_MACHINE.md](./STATE_MACHINE.md) - çŠ¶æ€æœºè®¾è®¡æ–‡æ¡£

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.2 AIè¾…åŠ©åä½œç‰ˆ
**æœ€åæ›´æ–°**: 2025-11-11
**ä¸‹æ¬¡å®¡æŸ¥**: AIæŠ€æœ¯æ ˆé‡å¤§æ›´æ–°æ—¶
**ç»´æŠ¤è´£ä»»äºº**: ç³»ç»Ÿæ¶æ„å›¢é˜Ÿ
**æ–°å¢ç‰¹è‰²**: æ•´åˆbolt.newå‰ç«¯AIå¼€å‘å’ŒClaude Codeåç«¯AIåä½œçš„å®Œæ•´æŠ€æœ¯è§„èŒƒ